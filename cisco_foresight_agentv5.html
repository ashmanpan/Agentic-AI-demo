<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cisco Foresight Agent UI (Demo)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
        }
        
        .navbar {
            background-color: #1a1a1a;
            color: white;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo img {
            height: 30px;
            margin-right: 10px;
            width: 60px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo img {
            height: 30px;
        }
        
        .main-container {
            display: flex;
            height: calc(100vh - 50px);
        }
        
        .sidebar {
            width: 240px;
            background-color: white;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .sidebar-title {
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }
        
        .new-thread-btn {
            display: inline-block;
            margin: 10px 15px;
            padding: 6px 12px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            color: #333;
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
        }
        
        .thread-list {
            list-style: none;
        }
        
        .thread-list-header {
            padding: 10px 15px;
            font-size: 12px;
            color: #666;
        }
        
        .thread-item {
            padding: 10px 15px;
            border-bottom: 1px solid #f0f0f0;
            color: #333;
            cursor: pointer;
        }
        
        .thread-item:hover {
            background-color: #f9f9f9;
        }
        
        .content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .assistant-container {
            text-align: center;
            max-width: 600px;
        }
        
        .assistant-logo {
            margin-bottom: 20px;
        }
        
        .assistant-logo svg {
            width: 100px;
            height: 100px;
        }
        
        .assistant-heading {
            font-size: 24px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .assistant-subtext {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .input-container {
            width: 100%;
            position: relative;
            margin-bottom: 20px;
        }
        
        .input-field {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
        }
        
        .send-button {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #0078d7;
            cursor: pointer;
        }
        
        .disclaimer {
            font-size: 12px;
            color: #999;
        }
        
        .chat-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            display: none;
            flex-direction: column;
            height: 100%;
        }
        
        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            padding: 10px 15px;
            border-radius: 8px;
            max-width: 80%;
        }
        
        .user-message {
            background-color: #e3f2fd;
            color: #333;
            align-self: flex-end;
        }
        
        .assistant-message {
            background-color: #f5f5f5;
            color: #333;
            align-self: flex-start;
            line-height: 1.5;
        }
        
        .assistant-message h3 {
            margin-bottom: 10px;
            color: #0078d7;
        }
        
        .assistant-message ul {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        
        .assistant-message .highlight {
            background-color: #fff3cd;
            padding: 2px 4px;
            border-radius: 2px;
        }
        
        .assistant-message .warning {
            color: #d32f2f;
            font-weight: 500;
        }
        
        .assistant-message .success {
            color: #2e7d32;
            font-weight: 500;
        }
        
        .typing-indicator {
            display: inline-block;
            padding: 10px 15px;
            background-color: #f5f5f5;
            border-radius: 8px;
            align-self: flex-start;
        }
        
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #999;
            border-radius: 50%;
            margin-right: 5px;
            animation: typing 1s infinite;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
            margin-right: 0;
        }
        
        .progress-container {
            width: 100%;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #0078d7;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .status-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-right: 5px;
        }
        
        .status-critical {
            background-color: #ffebee;
            color: #d32f2f;
        }
        
        .status-warning {
            background-color: #fff8e1;
            color: #ff8f00;
        }
        
        .status-success {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .status-info {
            background-color: #e3f2fd;
            color: #0277bd;
        }
        
        .chart-container {
            width: 100%;
            height: 120px;
            margin: 15px 0;
            position: relative;
        }
        
        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 24px;
            background-color: #0078d7;
            border-radius: 3px 3px 0 0;
        }
        
        .chart-label {
            position: absolute;
            bottom: -20px;
            text-align: center;
            font-size: 10px;
            color: #666;
            width: 24px;
        }
        
        .table-container {
            width: 100%;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th,
        .data-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .data-table th {
            background-color: #f0f0f0;
            font-weight: 500;
        }
        
        .data-table tbody tr:hover {
            background-color: #f9f9f9;
        }
        
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <svg width="80" height="24" viewBox="0 0 200 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="20" width="8" height="20" fill="white"/>
                <rect x="12" y="15" width="8" height="25" fill="white"/>
                <rect x="24" y="10" width="8" height="30" fill="white"/>
                <rect x="36" y="5" width="8" height="35" fill="white"/>
                <rect x="48" y="10" width="8" height="30" fill="white"/>
                <rect x="60" y="15" width="8" height="25" fill="white"/>
                <rect x="72" y="20" width="8" height="20" fill="white"/>
                <text x="90" y="35" fill="white" font-family="Arial, sans-serif" font-size="24" font-weight="bold">CISCO</text>
            </svg>
            <span>Foresight Agent UI (Demo)</span>
        </div>
        <div class="actions">
            <svg width="40" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="10" cy="10" r="9" stroke="white" stroke-width="2"/>
                <path d="M10 5V15" stroke="white" stroke-width="2"/>
                <path d="M5 10H15" stroke="white" stroke-width="2"/>
            </svg>
        </div>
    </div>
    
    <div class="main-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">Threads</h2>
            </div>
            <a href="#" class="new-thread-btn">+ New thread</a>
            <ul class="thread-list">
                <li class="thread-list-header">Today</li>
                <li class="thread-item" data-query="Packet Loss Investigation">Packet Loss Investigation</li>
                <li class="thread-item" data-query="Application Access Issue">Application Access Issue</li>
                <li class="thread-item" data-query="Network Latency Analysis">Network Latency Analysis</li>
                <li class="thread-item" data-query="Router Troubleshooting">Router Troubleshooting</li>
                <li class="thread-item" data-query="Intermittent Slow Response">Intermittent Slow Response</li>
                <li class="thread-item" data-query="Router Upgrade Assessment">Router Upgrade Assessment</li>
                <li class="thread-item" data-query="Security Breach Response">Security Breach Response</li>
                <li class="thread-item" data-query="SD-WAN Optimization">SD-WAN Optimization</li>
                <li class="thread-item" data-query="Capacity Planning">Capacity Planning</li>
            </ul>
        </div>
        
        <div class="content">
            <div class="assistant-container" id="welcome-screen">
                <div class="assistant-logo">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="30" fill="#4285F4" opacity="0.8" />
                        <circle cx="60" cy="45" r="25" fill="#34A853" opacity="0.6" />
                        <circle cx="55" cy="55" r="20" fill="#FBBC05" opacity="0.4" />
                    </svg>
                </div>
                <h1 class="assistant-heading">How can I help you today?</h1>
                <p class="assistant-subtext">
                    Choose a suggestion or use the text field to ask a question. I have limitations and won't always get it right, but your feedback will help me improve.
                </p>
                
                <div class="input-container">
                    <input type="text" class="input-field" id="main-input" placeholder="Ask the AI Assistant a question">
                    <button class="send-button" id="main-send-btn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 2L9 11" stroke="#0078D7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M18 2L12 18L9 11L2 8L18 2Z" stroke="#0078D7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                
                <p class="disclaimer">Assistant can make mistakes. Verify responses.</p>
            </div>
            
            <div class="chat-container" id="chat-screen">
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will be added here -->
                </div>
                
                <div class="input-container">
                    <input type="text" class="input-field" id="chat-input" placeholder="Ask the AI Assistant a question">
                    <button class="send-button" id="chat-send-btn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 2L9 11" stroke="#0078D7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M18 2L12 18L9 11L2 8L18 2Z" stroke="#0078D7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const welcomeScreen = document.getElementById('welcome-screen');
            const chatScreen = document.getElementById('chat-screen');
            const chatMessages = document.getElementById('chat-messages');
            const mainInput = document.getElementById('main-input');
            const mainSendBtn = document.getElementById('main-send-btn');
            const chatInput = document.getElementById('chat-input');
            const chatSendBtn = document.getElementById('chat-send-btn');
            const threadItems = document.querySelectorAll('.thread-item');
            
            // Rich text response for Network Capacity Planning & Prediction
            const capacityPlanningHTML = `<div class="root-container">
  <h3>Agentic AI - Network Capacity Planning & Prediction</h3>
  <p><strong>Proactive Capacity Analysis for Q2 Product Launch (Planning Request #CAP-2024-Q2)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Planning request #CAP-2024-Q2 received. Major product launch scheduled for April 15th. Marketing expects 5x traffic surge. Need capacity assessment and upgrade recommendations to ensure zero downtime.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating comprehensive capacity planning analysis. Deploying specialized agents for predictive modeling:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Historical analysis with <strong>CAPACITY_ANALYSIS_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> ML predictions with <strong>ML_PREDICTION_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Traffic modeling with <strong>TRAFFIC_MODELING_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Cost analysis with <strong>COST_OPTIMIZATION_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📊</span>
        <span class="agent-name">CAPACITY_ANALYSIS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Current infrastructure capacity analysis:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Component</th>
                <th>Current Load</th>
                <th>Peak Capacity</th>
                <th>Headroom</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Internet Edge (2x10G)</td>
                <td>12.4 Gbps</td>
                <td>18 Gbps</td>
                <td><span class="warning">45%</span></td>
              </tr>
              <tr>
                <td>Core Switches</td>
                <td>165 Gbps</td>
                <td>400 Gbps</td>
                <td><span class="success">59%</span></td>
              </tr>
              <tr>
                <td>Load Balancers</td>
                <td>45K req/s</td>
                <td>60K req/s</td>
                <td><span class="problem-value">25%</span></td>
              </tr>
              <tr>
                <td>Firewalls</td>
                <td>8.2 Gbps</td>
                <td>10 Gbps</td>
                <td><span class="problem-value">18%</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p>Historical growth rate: <span class="highlight">22% quarter-over-quarter</span></p>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Load Balancers & Firewalls Near Capacity</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">🤖</span>
        <span class="agent-name">ML_PREDICTION_AGENT</span>
        <span class="status-tag status-critical">High Risk</span>
      </div>
      <div class="agent-content">
        <p>ML-based traffic prediction for product launch:</p>
        <ul class="compact-list">
          <li>Training data: 3 years of historical launches</li>
          <li>Model type: LSTM with seasonal decomposition</li>
          <li>Confidence interval: 95%</li>
        </ul>
        <p>Predicted traffic surge pattern:</p>
        <div class="chart-container" style="height: 150px;">
          <div class="chart-bar" style="height: 40px; left: 10px;"></div>
          <div class="chart-label" style="left: 10px; top: 160px;">Day -7</div>
          <div class="chart-bar" style="height: 60px; left: 50px;"></div>
          <div class="chart-label" style="left: 50px; top: 160px;">Day -3</div>
          <div class="chart-bar" style="height: 80px; left: 90px;"></div>
          <div class="chart-label" style="left: 90px; top: 160px;">Day -1</div>
          <div class="chart-bar" style="height: 140px; left: 130px; background-color: #e74c3c;"></div>
          <div class="chart-label" style="left: 130px; top: 160px;">Launch</div>
          <div class="chart-bar" style="height: 120px; left: 170px; background-color: #f39c12;"></div>
          <div class="chart-label" style="left: 170px; top: 160px;">Day +1</div>
          <div class="chart-bar" style="height: 100px; left: 210px;"></div>
          <div class="chart-label" style="left: 210px; top: 160px;">Day +3</div>
          <div class="chart-bar" style="height: 80px; left: 250px;"></div>
          <div class="chart-label" style="left: 250px; top: 160px;">Day +7</div>
        </div>
        <div class="metric-predictions">
          <h5>Peak Load Predictions:</h5>
          <ul class="metric-list">
            <li>Bandwidth: <span class="problem-value">62 Gbps</span> (3.4x oversubscription!)</li>
            <li>Requests/sec: <span class="problem-value">285K</span> (4.75x current capacity)</li>
            <li>Concurrent users: <span class="problem-value">2.1M</span> (5.2x baseline)</li>
            <li>Database queries: <span class="warning">45K/sec</span> (2.8x current)</li>
          </ul>
        </div>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Infrastructure Will Fail Without Upgrades</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📈</span>
        <span class="agent-name">TRAFFIC_MODELING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Traffic pattern modeling and bottleneck analysis:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Traffic Type</th>
                <th>Current %</th>
                <th>Launch Day %</th>
                <th>Bandwidth Need</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Product Pages</td>
                <td>15%</td>
                <td>45%</td>
                <td>28 Gbps</td>
              </tr>
              <tr>
                <td>API Calls</td>
                <td>30%</td>
                <td>35%</td>
                <td>22 Gbps</td>
              </tr>
              <tr>
                <td>Media/CDN</td>
                <td>40%</td>
                <td>15%</td>
                <td>9 Gbps</td>
              </tr>
              <tr>
                <td>Checkout/Payment</td>
                <td>15%</td>
                <td>5%</td>
                <td>3 Gbps</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p>Critical path analysis: <span class="warning">Checkout system is the weakest link</span></p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">💰</span>
        <span class="agent-name">COST_OPTIMIZATION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Cost-optimized upgrade recommendations:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Option</th>
                <th>Components</th>
                <th>Cost</th>
                <th>Time</th>
                <th>Risk</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>A: Full Upgrade</td>
                <td>All components</td>
                <td>$850K</td>
                <td>6 weeks</td>
                <td><span class="status-tag status-success">Low</span></td>
              </tr>
              <tr>
                <td>B: Hybrid Cloud</td>
                <td>CDN + Cloud burst</td>
                <td>$320K</td>
                <td>3 weeks</td>
                <td><span class="status-tag status-warning">Medium</span></td>
              </tr>
              <tr>
                <td>C: Minimal</td>
                <td>LB + FW only</td>
                <td>$180K</td>
                <td>2 weeks</td>
                <td><span class="status-tag status-critical">High</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p>ROI Analysis: Option B provides best value with 89% success probability</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Capacity planning complete. Critical upgrades required. Generating implementation plan.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Creating roadmap with <strong>RECOMMENDATION_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📋</span>
        <span class="agent-name">RECOMMENDATION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Recommended implementation roadmap (Option B - Hybrid Cloud):</p>
        <div class="remediation-phase">
          <h5>Week 1-2: Foundation</h5>
          <ul>
            <li>Deploy CloudFlare CDN for static content (80% traffic reduction)</li>
            <li>Configure AWS Auto Scaling Groups for burst capacity</li>
            <li>Upgrade load balancers to F5 i5800 (300K req/s)</li>
          </ul>
        </div>
        <div class="remediation-phase">
          <h5>Week 3: Integration</h5>
          <ul>
            <li>Implement Global Server Load Balancing (GSLB)</li>
            <li>Configure cloud bursting triggers at 70% capacity</li>
            <li>Deploy synthetic monitoring for all paths</li>
          </ul>
        </div>
        <div class="remediation-phase">
          <h5>Week 4: Testing</h5>
          <ul>
            <li>Chaos engineering tests at 6x load</li>
            <li>Failover scenario validation</li>
            <li>Performance baseline establishment</li>
          </ul>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Capacity Planning Executive Summary</h4>
  
  <div class="capacity-dashboard">
    <h4>Infrastructure Readiness Score</h4>
    <div class="readiness-grid">
      <div class="readiness-item current">
        <h5>Current State</h5>
        <div class="score-circle low">
          <span class="score-value">34%</span>
        </div>
        <p>High risk of failure</p>
      </div>
      <div class="readiness-item planned">
        <h5>After Upgrade</h5>
        <div class="score-circle high">
          <span class="score-value">92%</span>
        </div>
        <p>Launch ready</p>
      </div>
    </div>
  </div>
  
  <div class="prediction-accuracy">
    <h4>ML Model Confidence</h4>
    <div class="confidence-metrics">
      <div class="conf-item">
        <span class="conf-label">Historical Accuracy</span>
        <div class="conf-bar">
          <div class="conf-fill" style="width: 94%;"></div>
        </div>
        <span class="conf-value">94%</span>
      </div>
      <div class="conf-item">
        <span class="conf-label">Prediction Confidence</span>
        <div class="conf-bar">
          <div class="conf-fill" style="width: 89%;"></div>
        </div>
        <span class="conf-value">89%</span>
      </div>
      <div class="conf-item">
        <span class="conf-label">Data Quality Score</span>
        <div class="conf-bar">
          <div class="conf-fill" style="width: 96%;"></div>
        </div>
        <span class="conf-value">96%</span>
      </div>
    </div>
  </div>
  
  <div class="what-if-scenarios">
    <h4>What-If Scenario Analysis</h4>
    <div class="scenario-grid">
      <div class="scenario-card">
        <h5>🎯 Expected (5x surge)</h5>
        <p>System handles load with 15% headroom</p>
        <span class="scenario-status success">✓ Pass</span>
      </div>
      <div class="scenario-card">
        <h5>⚡ Best Case (3x surge)</h5>
        <p>System handles load with 45% headroom</p>
        <span class="scenario-status success">✓ Pass</span>
      </div>
      <div class="scenario-card">
        <h5>🔥 Worst Case (8x surge)</h5>
        <p>Cloud burst activated, 5% degradation</p>
        <span class="scenario-status warning">⚠ Managed</span>
      </div>
    </div>
  </div>
  
  <div class="investment-summary">
    <h4>Investment Summary</h4>
    <div class="investment-grid">
      <div class="inv-card">
        <h5>Total Investment</h5>
        <p class="inv-value">$320K</p>
        <p class="inv-detail">One-time + 3 months operational</p>
      </div>
      <div class="inv-card">
        <h5>Revenue at Risk</h5>
        <p class="inv-value">$12.5M</p>
        <p class="inv-detail">If infrastructure fails</p>
      </div>
      <div class="inv-card">
        <h5>ROI</h5>
        <p class="inv-value">3,906%</p>
        <p class="inv-detail">Risk mitigation value</p>
      </div>
    </div>
  </div>
  
  <style>
    .metric-predictions {
      margin-top: 20px;
      padding: 15px;
      background-color: #fee;
      border-radius: 8px;
      border: 1px solid #e74c3c;
    }
    
    .metric-predictions h5 {
      margin-top: 0;
      color: #c0392b;
    }
    
    .capacity-dashboard {
      margin: 30px 0;
    }
    
    .readiness-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-top: 20px;
    }
    
    .readiness-item {
      text-align: center;
    }
    
    .score-circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px auto;
      font-size: 2em;
      font-weight: bold;
      color: white;
    }
    
    .score-circle.low {
      background-color: #e74c3c;
    }
    
    .score-circle.high {
      background-color: #27ae60;
    }
    
    .prediction-accuracy {
      margin: 30px 0;
    }
    
    .confidence-metrics {
      margin-top: 20px;
    }
    
    .conf-item {
      margin-bottom: 15px;
    }
    
    .conf-label {
      display: inline-block;
      width: 200px;
    }
    
    .conf-bar {
      display: inline-block;
      width: 300px;
      height: 20px;
      background-color: #ecf0f1;
      border-radius: 10px;
      overflow: hidden;
      vertical-align: middle;
      margin: 0 10px;
    }
    
    .conf-fill {
      height: 100%;
      background-color: #3498db;
    }
    
    .conf-value {
      font-weight: bold;
      color: #2c3e50;
    }
    
    .what-if-scenarios {
      margin: 30px 0;
    }
    
    .scenario-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 20px;
    }
    
    .scenario-card {
      padding: 20px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      text-align: center;
    }
    
    .scenario-card h5 {
      margin-top: 0;
      font-size: 1.1em;
    }
    
    .scenario-status {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: bold;
      margin-top: 10px;
    }
    
    .scenario-status.success {
      background-color: #d4edda;
      color: #155724;
    }
    
    .scenario-status.warning {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .investment-summary {
      margin-top: 30px;
    }
    
    .investment-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 20px;
    }
    
    .inv-card {
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      border: 1px solid #dee2e6;
    }
    
    .inv-card h5 {
      margin-top: 0;
      color: #495057;
    }
    
    .inv-value {
      font-size: 2.5em;
      font-weight: bold;
      color: #007bff;
      margin: 10px 0;
    }
    
    .inv-detail {
      font-size: 0.9em;
      color: #6c757d;
    }
  </style>
</div>`;

            // Rich text response for SD-WAN Performance Optimization
            const sdwanOptimizationHTML = `<div class="root-container">
  <h3>Agentic AI - SD-WAN Performance Optimization</h3>
  <p><strong>Resolving Video Conferencing Quality Issues Across Branch Offices (Ticket #QOS-78456)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Ticket #QOS-78456 received. Multiple branch offices reporting poor video conferencing quality during all-hands meetings. Issues include freezing video, audio drops, and disconnections affecting 500+ users.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating SD-WAN performance analysis for video conferencing optimization. Deploying specialized agents:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> SD-WAN topology mapping with <strong>SD_WAN_CONTROLLER_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Application performance metrics with <strong>APP_PERFORMANCE_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> SLA compliance check with <strong>SLA_MONITORING_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Path quality analysis with <strong>PATH_ANALYTICS_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🌐</span>
        <span class="agent-name">SD_WAN_CONTROLLER_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>SD-WAN topology and current policy analysis:</p>
        <ul class="compact-list">
          <li>Total branch sites: 25 locations globally</li>
          <li>Transport types: MPLS (primary), Internet (secondary), LTE (backup)</li>
          <li>Video traffic policy: Best-effort (no dedicated policy!)</li>
          <li>Current path selection: Cost-based routing active</li>
        </ul>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Branch Location</th>
                <th>Active Transport</th>
                <th>Available BW</th>
                <th>Utilization</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>New York</td>
                <td>Internet</td>
                <td>100 Mbps</td>
                <td><span class="problem-value">92%</span></td>
              </tr>
              <tr>
                <td>London</td>
                <td>Internet</td>
                <td>50 Mbps</td>
                <td><span class="problem-value">88%</span></td>
              </tr>
              <tr>
                <td>Singapore</td>
                <td>MPLS</td>
                <td>20 Mbps</td>
                <td><span class="problem-value">95%</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">No Dedicated Video QoS Policy</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">📊</span>
        <span class="agent-name">APP_PERFORMANCE_AGENT</span>
        <span class="status-tag status-critical">Poor Performance</span>
      </div>
      <div class="agent-content">
        <p>Video conferencing application performance metrics:</p>
        <ul class="metric-list">
          <li>MOS Score: <span class="problem-value">2.1/5.0</span> (Poor - threshold: 3.5)</li>
          <li>Packet Loss: <span class="problem-value">3.8%</span> (threshold: <0.5%)</li>
          <li>Jitter: <span class="problem-value">45ms</span> (threshold: <30ms)</li>
          <li>Latency: <span class="problem-value">180ms</span> (threshold: <150ms)</li>
        </ul>
        <p>Application breakdown by traffic type:</p>
        <div class="chart-container">
          <div class="chart-bar" style="height: 80px; left: 10px; background-color: #e74c3c;"></div>
          <div class="chart-label" style="left: 10px;">Video (35%)</div>
          <div class="chart-bar" style="height: 60px; left: 80px; background-color: #f39c12;"></div>
          <div class="chart-label" style="left: 80px;">Web (25%)</div>
          <div class="chart-bar" style="height: 50px; left: 150px; background-color: #3498db;"></div>
          <div class="chart-label" style="left: 150px;">Email (20%)</div>
          <div class="chart-bar" style="height: 40px; left: 220px; background-color: #95a5a6;"></div>
          <div class="chart-label" style="left: 220px;">Other (20%)</div>
        </div>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Video Traffic Suffering Due to Congestion</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📈</span>
        <span class="agent-name">SLA_MONITORING_AGENT</span>
        <span class="status-tag status-warning">SLA Violations</span>
      </div>
      <div class="agent-content">
        <p>SLA compliance analysis for real-time applications:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>SLA Metric</th>
                <th>Target</th>
                <th>Current</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Voice/Video Availability</td>
                <td>99.9%</td>
                <td>96.2%</td>
                <td><span class="status-tag status-critical">Violation</span></td>
              </tr>
              <tr>
                <td>Packet Loss</td>
                <td><0.5%</td>
                <td>3.8%</td>
                <td><span class="status-tag status-critical">Violation</span></td>
              </tr>
              <tr>
                <td>Jitter</td>
                <td><30ms</td>
                <td>45ms</td>
                <td><span class="status-tag status-warning">Violation</span></td>
              </tr>
              <tr>
                <td>Latency</td>
                <td><150ms</td>
                <td>180ms</td>
                <td><span class="status-tag status-warning">Violation</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🛤️</span>
        <span class="agent-name">PATH_ANALYTICS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Path quality analysis across transports:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Transport</th>
                <th>Loss %</th>
                <th>Jitter</th>
                <th>Latency</th>
                <th>Quality Score</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>MPLS</td>
                <td>0.01%</td>
                <td>5ms</td>
                <td>45ms</td>
                <td><span class="status-tag status-success">Excellent</span></td>
              </tr>
              <tr>
                <td>Internet</td>
                <td>2.5%</td>
                <td>35ms</td>
                <td>120ms</td>
                <td><span class="status-tag status-warning">Fair</span></td>
              </tr>
              <tr>
                <td>LTE</td>
                <td>1.2%</td>
                <td>25ms</td>
                <td>80ms</td>
                <td><span class="status-tag status-info">Good</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p><strong>Key Finding:</strong> MPLS has best quality but limited bandwidth. Internet links congested.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Root cause identified: Video traffic using congested Internet links without QoS. Requesting optimization.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Deploying optimization with <strong>QOS_OPTIMIZATION_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">⚡</span>
        <span class="agent-name">QOS_OPTIMIZATION_AGENT</span>
        <span class="status-tag status-success">Optimizing</span>
      </div>
      <div class="agent-content">
        <p>Implementing SD-WAN optimization policies:</p>
        <div class="code-block">
          <code>
! Create application-aware policy
policy VIDEO_CONFERENCE_OPTIMAL
 match application webex-meeting teams-video zoom
 match dscp 46 34
 action
  sla-class VOICE_VIDEO_SLA
  path-preference MPLS LTE INTERNET
  forward-error-correction
  packet-duplication

! Define SLA class
sla-class VOICE_VIDEO_SLA
 latency 150
 loss 0.5
 jitter 30

! Apply policy
sdwan-policy BRANCH_OFFICES
 site-list ALL_BRANCHES
  app-route-policy VIDEO_CONFERENCE_OPTIMAL
          </code>
        </div>
        <p>Optimization actions deployed:</p>
        <ul class="compact-list">
          <li>✓ Video traffic prioritized to MPLS when available</li>
          <li>✓ Forward Error Correction enabled for packet recovery</li>
          <li>✓ Packet duplication on dual paths for critical meetings</li>
          <li>✓ Dynamic path selection based on real-time SLA</li>
          <li>✓ Bandwidth reservation: 40% for real-time traffic</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Optimization complete, validating with <strong>VALIDATION_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">✅</span>
        <span class="agent-name">VALIDATION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Post-optimization validation results:</p>
        <ul class="metric-list">
          <li>MOS Score: <span class="success">4.2/5.0</span> (Excellent)</li>
          <li>Packet Loss: <span class="success">0.08%</span> (Within SLA)</li>
          <li>Jitter: <span class="success">12ms</span> (Excellent)</li>
          <li>Latency: <span class="success">65ms</span> (Optimal)</li>
        </ul>
        <p>User experience improvements:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Metric</th>
                <th>Before</th>
                <th>After</th>
                <th>Improvement</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Video Quality</td>
                <td>360p/15fps</td>
                <td>1080p/30fps</td>
                <td><span class="success">+200%</span></td>
              </tr>
              <tr>
                <td>Audio Drops</td>
                <td>12 per hour</td>
                <td>0 per hour</td>
                <td><span class="success">-100%</span></td>
              </tr>
              <tr>
                <td>Call Success Rate</td>
                <td>78%</td>
                <td>99.8%</td>
                <td><span class="success">+28%</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="finding-summary">
          <span class="finding-tag finding-good">All SLAs Now Met</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">SD-WAN Optimization Summary</h4>
  
  <div class="optimization-results">
    <h4>Performance Transformation</h4>
    <div class="before-after-grid">
      <div class="ba-card before">
        <h5>Before Optimization</h5>
        <ul>
          <li>No QoS for video traffic</li>
          <li>Cost-based routing only</li>
          <li>92% link utilization</li>
          <li>3.8% packet loss</li>
          <li>Poor user experience</li>
        </ul>
      </div>
      <div class="ba-card after">
        <h5>After Optimization</h5>
        <ul>
          <li>Dedicated video QoS policy</li>
          <li>SLA-based intelligent routing</li>
          <li>Load balanced at 65%</li>
          <li>0.08% packet loss</li>
          <li>Excellent user experience</li>
        </ul>
      </div>
    </div>
  </div>
  
  <div class="path-distribution">
    <h4>Traffic Distribution by Transport</h4>
    <div class="distribution-chart">
      <div class="dist-item">
        <span class="dist-label">MPLS</span>
        <div class="dist-bar">
          <div class="dist-fill mpls" style="width: 60%;"></div>
        </div>
        <span class="dist-value">60% (Video/Voice)</span>
      </div>
      <div class="dist-item">
        <span class="dist-label">Internet</span>
        <div class="dist-bar">
          <div class="dist-fill internet" style="width: 30%;"></div>
        </div>
        <span class="dist-value">30% (Web/Email)</span>
      </div>
      <div class="dist-item">
        <span class="dist-label">LTE</span>
        <div class="dist-bar">
          <div class="dist-fill lte" style="width: 10%;"></div>
        </div>
        <span class="dist-value">10% (Backup/Overflow)</span>
      </div>
    </div>
  </div>
  
  <div class="remediation-container">
    <h4>Recommendations for Sustained Performance</h4>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">IMMEDIATE</span> Continue Monitoring</h5>
      <ol class="action-list">
        <li>Monitor MOS scores during peak hours</li>
        <li>Track SLA compliance dashboard</li>
        <li>Gather user feedback on quality</li>
        <li>Fine-tune FEC and duplication thresholds</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">SHORT-TERM</span> Capacity Planning (1-3 months)</h5>
      <ol class="action-list">
        <li>Upgrade Internet bandwidth at congested sites</li>
        <li>Deploy local Internet breakout for Office 365</li>
        <li>Implement caching for frequently accessed content</li>
        <li>Add redundant Internet circuits at critical sites</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">LONG-TERM</span> Architecture Evolution (3-6 months)</h5>
      <ol class="action-list">
        <li>Migrate to full mesh SD-WAN topology</li>
        <li>Deploy cloud-based SWG for security</li>
        <li>Implement AI-driven path selection</li>
        <li>Plan for 5G integration</li>
      </ol>
    </div>
  </div>
  
  <style>
    .optimization-results {
      margin: 30px 0;
    }
    
    .before-after-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    
    .ba-card {
      padding: 20px;
      border-radius: 8px;
    }
    
    .ba-card.before {
      background-color: #fee;
      border: 2px solid #e74c3c;
    }
    
    .ba-card.after {
      background-color: #e8f8f5;
      border: 2px solid #27ae60;
    }
    
    .ba-card h5 {
      margin-top: 0;
      margin-bottom: 15px;
    }
    
    .ba-card ul {
      list-style: none;
      padding-left: 0;
    }
    
    .ba-card li {
      padding: 5px 0;
      padding-left: 20px;
      position: relative;
    }
    
    .ba-card li::before {
      content: "•";
      position: absolute;
      left: 0;
      font-weight: bold;
    }
    
    .path-distribution {
      margin: 30px 0;
    }
    
    .distribution-chart {
      margin-top: 20px;
    }
    
    .dist-item {
      margin-bottom: 15px;
    }
    
    .dist-label {
      display: inline-block;
      width: 80px;
      font-weight: bold;
    }
    
    .dist-bar {
      display: inline-block;
      width: 300px;
      height: 30px;
      background-color: #ecf0f1;
      border-radius: 15px;
      overflow: hidden;
      vertical-align: middle;
      margin: 0 10px;
    }
    
    .dist-fill {
      height: 100%;
      transition: width 0.5s ease;
    }
    
    .dist-fill.mpls {
      background-color: #3498db;
    }
    
    .dist-fill.internet {
      background-color: #e74c3c;
    }
    
    .dist-fill.lte {
      background-color: #f39c12;
    }
    
    .dist-value {
      font-size: 0.9em;
      color: #7f8c8d;
    }
  </style>
</div>`;

            // Rich text response for Security Breach Detection & Response
            const securityBreachHTML = `<div class="root-container">
  <h3>Agentic AI - Security Breach Detection & Response</h3>
  <p><strong>Investigating Suspicious Network Activity Alert (Incident #INC-45123)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🚨</span>
        <span class="agent-name">THREAT_DETECTION_AGENT</span>
        <span class="status-tag status-critical">Alert Triggered</span>
      </div>
      <div class="agent-content">
        <p>Anomaly detected at 14:32:15 UTC:</p>
        <ul class="compact-list">
          <li>Unusual outbound traffic spike from DMZ servers</li>
          <li>Data volume: <span class="problem-value">487 GB in 15 minutes</span> (baseline: 12 GB)</li>
          <li>Destination: Multiple IPs in Eastern Europe (suspicious)</li>
          <li>Protocol: HTTPS (port 443) - encrypted payload</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Potential Data Exfiltration</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Escalating to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating emergency security incident response protocol. Deploying specialized agents for parallel investigation:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Deep traffic analysis with <strong>TRAFFIC_FORENSICS_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Source identification with <strong>COMPROMISE_DETECTION_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Attack pattern analysis with <strong>THREAT_INTELLIGENCE_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Immediate containment with <strong>CONTAINMENT_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">🔍</span>
        <span class="agent-name">TRAFFIC_FORENSICS_AGENT</span>
        <span class="status-tag status-critical">Critical Finding</span>
      </div>
      <div class="agent-content">
        <p>Deep packet inspection results:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Source Server</th>
                <th>Data Transferred</th>
                <th>Destination</th>
                <th>Pattern</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>DB-DMZ-01 (10.20.30.15)</td>
                <td><span class="problem-value">312 GB</span></td>
                <td>185.220.101.45</td>
                <td>SQL dumps (*.sql.gz)</td>
              </tr>
              <tr>
                <td>WEB-DMZ-03 (10.20.30.18)</td>
                <td><span class="problem-value">98 GB</span></td>
                <td>185.220.101.67</td>
                <td>Customer data (*.csv)</td>
              </tr>
              <tr>
                <td>APP-DMZ-02 (10.20.30.22)</td>
                <td><span class="problem-value">77 GB</span></td>
                <td>185.220.101.89</td>
                <td>Config files (*.conf)</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p><strong>Critical:</strong> Data appears to be customer database exports and configuration files!</p>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Active Data Breach Confirmed</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔐</span>
        <span class="agent-name">COMPROMISE_DETECTION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Compromise vector identified:</p>
        <ul class="compact-list">
          <li>Malware detected: <span class="problem-value">Cobalt Strike beacon</span> on affected servers</li>
          <li>Initial compromise: <span class="warning">3 days ago via RDP brute force</span></li>
          <li>Lateral movement: PowerShell scripts used for privilege escalation</li>
          <li>Persistence: Scheduled tasks created for data staging</li>
          <li>C2 Server: 185.220.101.45 (known APT group infrastructure)</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🌐</span>
        <span class="agent-name">THREAT_INTELLIGENCE_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Threat intelligence correlation:</p>
        <ul class="compact-list">
          <li>Attack pattern matches: <span class="warning">APT28 (Fancy Bear)</span></li>
          <li>Similar attacks reported in financial sector last week</li>
          <li>Known TTPs: Living off the land, encrypted exfiltration</li>
          <li>Typical dwell time: 14-21 days before exfiltration</li>
          <li>Target: Customer PII and financial data</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">🛡️</span>
        <span class="agent-name">CONTAINMENT_AGENT</span>
        <span class="status-tag status-critical">Emergency Action</span>
      </div>
      <div class="agent-content">
        <p>Executing immediate containment measures:</p>
        <div class="code-block">
          <code>
! Block C2 servers at perimeter
access-list EMERGENCY_BLOCK deny ip any host 185.220.101.45
access-list EMERGENCY_BLOCK deny ip any host 185.220.101.67
access-list EMERGENCY_BLOCK deny ip any host 185.220.101.89
access-list EMERGENCY_BLOCK deny ip any 185.220.101.0 255.255.255.0

! Isolate compromised servers
vlan 999
 name QUARANTINE
interface range Gi1/0/15, Gi1/0/18, Gi1/0/22
 switchport access vlan 999
 shutdown
          </code>
        </div>
        <ul class="metric-list">
          <li>C2 communication: <span class="success">✓ BLOCKED</span></li>
          <li>Compromised servers: <span class="success">✓ ISOLATED</span></li>
          <li>Lateral movement: <span class="success">✓ PREVENTED</span></li>
          <li>Data exfiltration: <span class="success">✓ STOPPED</span></li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Containment complete, initiating <strong>INCIDENT_RESPONSE_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📋</span>
        <span class="agent-name">INCIDENT_RESPONSE_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Incident response actions initiated:</p>
        <ol class="action-list">
          <li>✓ Security Operations Center (SOC) notified</li>
          <li>✓ Incident ticket created: INC-45123</li>
          <li>✓ Legal team notified for potential breach disclosure</li>
          <li>✓ Forensic image capture initiated on affected systems</li>
          <li>✓ Password reset enforced for all DMZ service accounts</li>
          <li>✓ Enhanced monitoring deployed on all DMZ servers</li>
        </ol>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting recovery plan from <strong>RECOVERY_PLANNING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔧</span>
        <span class="agent-name">RECOVERY_PLANNING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Recovery plan generated:</p>
        <div class="remediation-phase">
          <h5>Phase 1: Immediate (0-4 hours)</h5>
          <ul>
            <li>Complete forensic analysis</li>
            <li>Identify all compromised accounts</li>
            <li>Patch vulnerable RDP services</li>
            <li>Deploy EDR on all DMZ servers</li>
          </ul>
        </div>
        <div class="remediation-phase">
          <h5>Phase 2: Short-term (4-24 hours)</h5>
          <ul>
            <li>Rebuild compromised servers from clean images</li>
            <li>Implement MFA for all administrative access</li>
            <li>Deploy honeypots for threat detection</li>
            <li>Conduct threat hunting across environment</li>
          </ul>
        </div>
        <div class="remediation-phase">
          <h5>Phase 3: Long-term (1-4 weeks)</h5>
          <ul>
            <li>Complete security architecture review</li>
            <li>Implement zero-trust network segmentation</li>
            <li>Deploy SIEM with ML-based anomaly detection</li>
            <li>Conduct security awareness training</li>
          </ul>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Incident Summary Report</h4>
  
  <div class="incident-timeline">
    <h4>Attack Timeline</h4>
    <div class="timeline">
      <div class="timeline-item">
        <div class="timeline-dot critical"></div>
        <div class="timeline-content">
          <span class="timeline-time">Day -3</span>
          <p>Initial compromise via RDP brute force</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">Day -2</span>
          <p>Lateral movement and privilege escalation</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">Day -1</span>
          <p>Data staging and compression</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot critical"></div>
        <div class="timeline-content">
          <span class="timeline-time">14:32 Today</span>
          <p>Exfiltration attempt detected and blocked</p>
        </div>
      </div>
    </div>
  </div>
  
  <div class="impact-assessment">
    <h4>Impact Assessment</h4>
    <div class="impact-grid">
      <div class="impact-card high">
        <h5>Data at Risk</h5>
        <p class="impact-value">487 GB</p>
        <p>Customer records, financial data</p>
      </div>
      <div class="impact-card medium">
        <h5>Systems Compromised</h5>
        <p class="impact-value">3</p>
        <p>DMZ database and web servers</p>
      </div>
      <div class="impact-card low">
        <h5>Data Exfiltrated</h5>
        <p class="impact-value">~52 GB</p>
        <p>Partial transfer before blocking</p>
      </div>
      <div class="impact-card success">
        <h5>Response Time</h5>
        <p class="impact-value">3.2 min</p>
        <p>From detection to containment</p>
      </div>
    </div>
  </div>
  
  <div class="security-recommendations">
    <h4>Security Recommendations</h4>
    <div class="recommendation-grid">
      <div class="rec-item critical">
        <span class="rec-icon">🔴</span>
        <div class="rec-content">
          <h5>Critical</h5>
          <p>Implement MFA for all remote access immediately</p>
        </div>
      </div>
      <div class="rec-item high">
        <span class="rec-icon">🟠</span>
        <div class="rec-content">
          <h5>High</h5>
          <p>Deploy EDR solution on all critical servers</p>
        </div>
      </div>
      <div class="rec-item medium">
        <span class="rec-icon">🟡</span>
        <div class="rec-content">
          <h5>Medium</h5>
          <p>Segment DMZ with micro-segmentation</p>
        </div>
      </div>
    </div>
  </div>
  
  <style>
    .incident-timeline {
      margin: 20px 0;
    }
    
    .timeline-dot.critical {
      background-color: #e74c3c;
      box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.3);
    }
    
    .impact-assessment {
      margin: 30px 0;
    }
    
    .impact-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-top: 20px;
    }
    
    .impact-card {
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      color: white;
    }
    
    .impact-card.high {
      background-color: #e74c3c;
    }
    
    .impact-card.medium {
      background-color: #f39c12;
    }
    
    .impact-card.low {
      background-color: #3498db;
    }
    
    .impact-card.success {
      background-color: #27ae60;
    }
    
    .impact-value {
      font-size: 2.5em;
      font-weight: bold;
      margin: 10px 0;
    }
    
    .security-recommendations {
      margin-top: 30px;
    }
    
    .recommendation-grid {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 20px;
    }
    
    .rec-item {
      display: flex;
      align-items: center;
      padding: 15px;
      border-radius: 8px;
      background-color: #f9f9f9;
      border-left: 4px solid;
    }
    
    .rec-item.critical {
      border-color: #e74c3c;
    }
    
    .rec-item.high {
      border-color: #f39c12;
    }
    
    .rec-item.medium {
      border-color: #f1c40f;
    }
    
    .rec-icon {
      font-size: 1.5em;
      margin-right: 15px;
    }
    
    .rec-content h5 {
      margin: 0 0 5px 0;
      color: #2c3e50;
    }
    
    .rec-content p {
      margin: 0;
      color: #7f8c8d;
    }
  </style>
</div>`;

            // Rich text response for Router Upgrade Resilience Assessment
            const routerUpgradeResilienceHTML = `<div class="root-container">
  <h3>Agentic AI - Pre-Upgrade Resilience Assessment</h3>
  <p><strong>Comprehensive Resilience Check for Router DC-CORE-01 Upgrade (Change Request #CR-89234)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Change Request #CR-89234 received. Planned upgrade for router DC-CORE-01 from IOS-XR 7.3.2 to 7.5.1 scheduled for maintenance window. Requesting comprehensive resilience assessment before approval.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating comprehensive pre-upgrade resilience assessment. Need to verify redundancy and failover capabilities across all layers to ensure zero service impact during upgrade.</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting hardware redundancy check from <strong>HARDWARE_RESILIENCE_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting IGP analysis from <strong>IGP_RESILIENCE_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting BGP analysis from <strong>BGP_RESILIENCE_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting service impact analysis from <strong>SERVICE_IMPACT_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting traffic simulation from <strong>TRAFFIC_SIMULATION_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔧</span>
        <span class="agent-name">HARDWARE_RESILIENCE_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Hardware redundancy assessment for DC-CORE-01:</p>
        <ul class="compact-list">
          <li>Route Processors: <span class="success">Dual RP (Active/Standby)</span></li>
          <li>Power Supplies: <span class="success">4 PSUs (N+2 redundancy)</span></li>
          <li>Fan Trays: <span class="success">All operational (N+1 redundancy)</span></li>
          <li>Line Cards: <span class="success">No single point of failure</span></li>
          <li>Fabric Modules: <span class="success">5+1 redundancy active</span></li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Hardware Fully Redundant</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">🌐</span>
        <span class="agent-name">IGP_RESILIENCE_AGENT</span>
        <span class="status-tag status-warning">Partial Issue</span>
      </div>
      <div class="agent-content">
        <p>IGP (ISIS) resilience analysis:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Neighbor</th>
                <th>State</th>
                <th>Metric</th>
                <th>Backup Path</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>DC-CORE-02</td>
                <td><span class="status-tag status-success">UP</span></td>
                <td>10</td>
                <td>Yes (via DC-AGG-01)</td>
              </tr>
              <tr>
                <td>DC-AGG-01</td>
                <td><span class="status-tag status-success">UP</span></td>
                <td>10</td>
                <td>Yes (via DC-CORE-02)</td>
              </tr>
              <tr>
                <td>DC-AGG-02</td>
                <td><span class="status-tag status-success">UP</span></td>
                <td>10</td>
                <td><span class="warning">No - Single path only</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p><span class="warning">Warning:</span> DC-AGG-02 has only single ISIS adjacency to DC-CORE-01. If DC-CORE-01 goes down, 12 prefixes will be unreachable for 3-5 seconds until IGP reconverges.</p>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Single Point of Failure Detected</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔀</span>
        <span class="agent-name">BGP_RESILIENCE_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>BGP resilience analysis complete:</p>
        <ul class="compact-list">
          <li>iBGP Sessions: <span class="success">All have redundant paths via route reflectors</span></li>
          <li>eBGP Sessions: <span class="success">BFD enabled, sub-second failover</span></li>
          <li>Route Reflector Clients: <span class="success">Connected to both RR1 and RR2</span></li>
          <li>Graceful Restart: <span class="success">Enabled on all sessions</span></li>
          <li>NSR (Non-Stop Routing): <span class="success">Active and synchronized</span></li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-good">BGP Fully Resilient</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">📡</span>
        <span class="agent-name">SERVICE_IMPACT_AGENT</span>
        <span class="status-tag status-warning">Medium Risk</span>
      </div>
      <div class="agent-content">
        <p>Service impact analysis for DC-CORE-01 upgrade:</p>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Service</th>
                <th>Traffic Volume</th>
                <th>Redundancy</th>
                <th>Impact Risk</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>L3VPN - Banking</td>
                <td>45 Gbps</td>
                <td>ECMP via DC-CORE-02</td>
                <td><span class="status-tag status-success">Low</span></td>
              </tr>
              <tr>
                <td>Internet Gateway</td>
                <td>78 Gbps</td>
                <td>Active/Standby with DC-CORE-02</td>
                <td><span class="status-tag status-success">Low</span></td>
              </tr>
              <tr>
                <td>MPLS Core</td>
                <td>120 Gbps</td>
                <td>50% traffic will reroute</td>
                <td><span class="status-tag status-warning">Medium</span></td>
              </tr>
              <tr>
                <td>Voice Services</td>
                <td>8 Gbps</td>
                <td>Single path for 2000 calls</td>
                <td><span class="status-tag status-critical">High</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p><span class="warning">Critical Finding:</span> Voice services for Site-B (2000 active calls) currently have only single path through DC-CORE-01.</p>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Voice Service Risk Identified</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔄</span>
        <span class="agent-name">TRAFFIC_SIMULATION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Failover simulation results (DC-CORE-01 shutdown scenario):</p>
        <ul class="metric-list">
          <li>Convergence Time: <span class="normal-value">1.2 seconds</span> average</li>
          <li>Packet Loss: <span class="problem-value">0.8%</span> for 1.2 seconds</li>
          <li>BGP Prefixes: <span class="success">All maintained via alternate paths</span></li>
          <li>Link Utilization on DC-CORE-02: <span class="warning">Will increase to 85%</span></li>
          <li>QoS Policy Impact: <span class="success">Adequate buffers available</span></li>
        </ul>
        <div class="chart-container">
          <div class="chart-bar" style="height: 50px; left: 10px; background-color: #3498db;"></div>
          <div class="chart-label" style="left: 10px;">Current</div>
          <div class="chart-bar" style="height: 85px; left: 80px; background-color: #f39c12;"></div>
          <div class="chart-label" style="left: 80px;">During Upgrade</div>
          <div class="chart-bar" style="height: 50px; left: 150px; background-color: #3498db;"></div>
          <div class="chart-label" style="left: 150px;">Post-Upgrade</div>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Consolidating all resilience findings and generating risk assessment:</p>
        <ul class="finding-list">
          <li>✅ Hardware redundancy: Fully resilient</li>
          <li>⚠️ IGP redundancy: Single point of failure for DC-AGG-02</li>
          <li>✅ BGP redundancy: Fully resilient with graceful restart</li>
          <li>❌ Service impact: High risk for voice services</li>
          <li>⚠️ Traffic capacity: DC-CORE-02 will reach 85% utilization</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting mitigation plan from <strong>MITIGATION_PLANNING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🛡️</span>
        <span class="agent-name">MITIGATION_PLANNING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Pre-upgrade mitigation plan to address identified risks:</p>
        <ol class="action-list">
          <li><strong>IGP Risk Mitigation:</strong> Configure temporary ISIS adjacency between DC-AGG-02 and DC-CORE-02 (15 minutes)</li>
          <li><strong>Voice Service Protection:</strong> Pre-stage voice traffic failover to DC-CORE-02 before upgrade (10 minutes)</li>
          <li><strong>Capacity Management:</strong> Implement temporary QoS policy to protect critical traffic during high utilization (5 minutes)</li>
          <li><strong>Monitoring Enhancement:</strong> Set up real-time dashboards for all affected services (10 minutes)</li>
        </ol>
        <p>Total preparation time: <strong>40 minutes</strong></p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Resilience assessment complete. Generating final recommendation.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>IO_AGENT</strong> for change approval recommendation
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Executive Summary - Upgrade Resilience Assessment</h4>
  
  <div class="rca-container">
    <h4>Overall Risk Assessment <span class="confidence-tag">Medium Risk</span></h4>
    <p>The planned upgrade of DC-CORE-01 has been assessed across multiple resilience dimensions. While the infrastructure has good redundancy overall, <strong>three critical risks</strong> have been identified that require mitigation before proceeding:</p>
    <ol>
      <li>Single IGP path dependency for DC-AGG-02</li>
      <li>Voice services with no alternate path (affecting 2000 active calls)</li>
      <li>DC-CORE-02 utilization will reach 85% during failover</li>
    </ol>
  </div>
  
  <div class="risk-matrix">
    <h4>Risk Matrix Summary</h4>
    <div class="matrix-grid">
      <div class="matrix-cell low-risk">
        <h5>Low Risk</h5>
        <ul>
          <li>Hardware Components</li>
          <li>BGP Routing</li>
          <li>L3VPN Services</li>
          <li>Internet Gateway</li>
        </ul>
      </div>
      <div class="matrix-cell medium-risk">
        <h5>Medium Risk</h5>
        <ul>
          <li>IGP Topology</li>
          <li>MPLS Core Traffic</li>
          <li>Link Utilization</li>
        </ul>
      </div>
      <div class="matrix-cell high-risk">
        <h5>High Risk</h5>
        <ul>
          <li>Voice Services</li>
          <li>DC-AGG-02 Connectivity</li>
        </ul>
      </div>
    </div>
  </div>
  
  <div class="remediation-container">
    <h4>Recommended Action Plan</h4>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">PRE-UPGRADE</span> Required Mitigations (40 minutes)</h5>
      <ol class="action-list">
        <li>Configure ISIS adjacency: DC-AGG-02 ↔ DC-CORE-02
          <code>interface TenGigE0/0/0/8
  isis circuit-type level-2-only
  isis metric 20</code></li>
        <li>Pre-failover voice traffic to DC-CORE-02:
          <code>router bgp 65001
  neighbor 10.1.1.2
   route-policy VOICE-PREFER-CORE2 in</code></li>
        <li>Apply temporary QoS boost on DC-CORE-02:
          <code>policy-map TEMP-UPGRADE-QOS
  class VOICE
    priority level 1
    police rate 10 gbps</code></li>
        <li>Enable enhanced monitoring on affected services</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">UPGRADE WINDOW</span> Execution Steps</h5>
      <ol class="action-list">
        <li>Verify all mitigations are active</li>
        <li>Initiate graceful router shutdown:
          <code>router isis 1
  shutdown</code></li>
        <li>Proceed with IOS-XR upgrade to 7.5.1</li>
        <li>Expected downtime: 12-15 minutes</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">POST-UPGRADE</span> Validation & Rollback</h5>
      <ol class="action-list">
        <li>Verify all protocols re-established</li>
        <li>Confirm service restoration</li>
        <li>Revert voice traffic to ECMP</li>
        <li>Remove temporary configurations</li>
        <li>Monitor for 24 hours</li>
      </ol>
    </div>
  </div>
  
  <div class="approval-recommendation">
    <h4>Change Approval Recommendation</h4>
    <div class="recommendation-box conditional">
      <span class="recommendation-icon">⚠️</span>
      <div class="recommendation-content">
        <h5>CONDITIONAL APPROVAL</h5>
        <p>The upgrade can proceed <strong>ONLY AFTER</strong> implementing the required risk mitigations. Without these mitigations, there is high probability of voice service disruption affecting 2000 users.</p>
        <div class="action-buttons">
          <button class="action-button approve">Approve with Conditions</button>
          <button class="action-button schedule">Reschedule for Mitigation</button>
          <button class="action-button more-info">Request More Analysis</button>
        </div>
      </div>
    </div>
  </div>
  
  <style>
    .risk-matrix {
      margin: 20px 0;
    }
    
    .matrix-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 15px;
    }
    
    .matrix-cell {
      padding: 15px;
      border-radius: 8px;
      min-height: 120px;
    }
    
    .matrix-cell h5 {
      margin-top: 0;
      margin-bottom: 10px;
      font-weight: bold;
    }
    
    .matrix-cell ul {
      margin: 0;
      padding-left: 20px;
      font-size: 0.9em;
    }
    
    .low-risk {
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
    }
    
    .medium-risk {
      background-color: #fff3cd;
      border: 1px solid #ffeeba;
      color: #856404;
    }
    
    .high-risk {
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
    }
    
    .approval-recommendation {
      margin-top: 30px;
    }
    
    .recommendation-box {
      display: flex;
      align-items: flex-start;
      padding: 20px;
      border-radius: 8px;
      gap: 15px;
    }
    
    .recommendation-box.conditional {
      background-color: #fff3cd;
      border: 2px solid #ff8f00;
    }
    
    .recommendation-icon {
      font-size: 2em;
      flex-shrink: 0;
    }
    
    .recommendation-content {
      flex-grow: 1;
    }
    
    .recommendation-content h5 {
      margin-top: 0;
      color: #ff8f00;
      font-size: 1.2em;
    }
    
    .finding-list {
      list-style: none;
      padding-left: 0;
    }
    
    .finding-list li {
      margin-bottom: 8px;
      padding-left: 25px;
      position: relative;
    }
    
    .finding-list li::before {
      position: absolute;
      left: 0;
    }
  </style>
</div>`;

            // Rich text response for Intermittent Slow Response with SR-PCE
            const intermittentSlowResponseHTML = `<div class="root-container">
  <h3>Agentic AI - Intermittent Slow Response Investigation</h3>
  <p><strong>Investigating Intermittent Application Slowness for Global Finance Corp (Ticket #78234)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Ticket #78234 received from Global Finance Corp. Users experiencing intermittent slow response times (15-20 seconds) for critical trading application. Issue affects London to Singapore traffic flow.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Analyzing intermittent performance issues. Need to investigate end-to-end path quality and identify problematic segments.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting path analysis from <strong>TOPOLOGY_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🗺️</span>
        <span class="agent-name">TOPOLOGY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Current path analysis for London to Singapore traffic:</p>
        <ul class="compact-list">
          <li>London Edge: LON-PE-01 (10.100.1.1)</li>
          <li>Transit: FRA-P-01 → DXB-P-01 → MUM-P-01</li>
          <li>Singapore Edge: SIN-PE-01 (10.200.1.1)</li>
          <li>Total Hops: 8</li>
          <li>Current Path Latency: 165ms (baseline: 142ms)</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating comprehensive link quality analysis across the path:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting link quality metrics from <strong>LINK_QUALITY_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting performance telemetry from <strong>TELEMETRY_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting interface statistics from <strong>INTERFACE_STATS_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">📊</span>
        <span class="agent-name">LINK_QUALITY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Link quality analysis complete. <strong>Critical finding on DXB-P-01 to MUM-P-01 link</strong>:</p>
        <ul class="metric-list">
          <li>CRC Errors: <span class="problem-value">847 errors/min</span> (threshold: <10)</li>
          <li>Input Errors: <span class="problem-value">1,234</span> in last hour</li>
          <li>Packet Loss: <span class="problem-value">3.2%</span> average, spikes to <span class="problem-value">12%</span></li>
          <li>Link Utilization: <span class="normal-value">45%</span> (not congested)</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Physical Layer Degradation Detected</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📈</span>
        <span class="agent-name">TELEMETRY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Performance telemetry confirms intermittent degradation:</p>
        <ul class="compact-list">
          <li>TCP retransmissions increased by 450% during slowdowns</li>
          <li>Application response time correlates with CRC error spikes</li>
          <li>Issue frequency: Every 10-15 minutes lasting 2-3 minutes</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Performance Impact Confirmed</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔍</span>
        <span class="agent-name">INTERFACE_STATS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Interface statistics for DXB-P-01 to MUM-P-01 link:</p>
        <ul class="compact-list">
          <li>Optical power: <span class="problem-value">-28.5 dBm</span> (threshold: -27 dBm)</li>
          <li>SNR degrading over time</li>
          <li>Likely cause: Fiber degradation or dirty optical connectors</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Root cause identified: Physical layer issues on DXB-MUM link causing packet loss and retransmissions. Immediate mitigation needed while scheduling maintenance.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Invoking <strong>SR_PCE_AGENT</strong> for dynamic path optimization
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">🛤️</span>
        <span class="agent-name">SR_PCE_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>SR-PCE (Segment Routing Path Computation Element) analysis initiated:</p>
        <ul class="compact-list">
          <li>Current path constraint violations: Packet loss exceeds SLA threshold</li>
          <li>Computing alternative paths with SR-TE policies...</li>
          <li>Found 3 viable alternative paths avoiding DXB-MUM link</li>
        </ul>
        
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Path Option</th>
                <th>Route</th>
                <th>Latency</th>
                <th>Available BW</th>
                <th>Quality Score</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Option 1</td>
                <td>LON → FRA → IST → KHI → SIN</td>
                <td>148ms</td>
                <td>8.2 Gbps</td>
                <td><span class="status-tag status-success">98/100</span></td>
              </tr>
              <tr>
                <td>Option 2</td>
                <td>LON → AMS → FRA → CAI → BOM → SIN</td>
                <td>155ms</td>
                <td>6.5 Gbps</td>
                <td><span class="status-tag status-info">92/100</span></td>
              </tr>
              <tr>
                <td>Option 3</td>
                <td>LON → MAD → CAI → BLR → SIN</td>
                <td>162ms</td>
                <td>5.8 Gbps</td>
                <td><span class="status-tag status-warning">85/100</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <p><strong>Recommendation:</strong> Deploy SR-TE Policy with Option 1 path</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting deployment from <strong>AUTOMATION_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🤖</span>
        <span class="agent-name">AUTOMATION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Deploying SR-TE policy for traffic steering:</p>
        <div class="code-block">
          <code>
segment-routing traffic-eng
 policy FINANCE_CORP_OPTIMAL
  color 100 end-point 10.200.1.1
  candidate-paths
   preference 100
    explicit segment-list LON_IST_KHI_SIN
     weight 10
  !
 !
!
          </code>
        </div>
        <ul class="compact-list">
          <li>SR-TE tunnel established successfully</li>
          <li>Traffic redirected via IST-KHI path</li>
          <li>BGP color community applied for application steering</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Deployment complete, requesting validation from <strong>VALIDATION_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">✅</span>
        <span class="agent-name">VALIDATION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Post-deployment validation results:</p>
        <ul class="metric-list">
          <li>Application Response Time: <span class="success">1.2 seconds</span> (was 15-20s)</li>
          <li>Packet Loss: <span class="success">0.001%</span> (was 3.2%)</li>
          <li>TCP Retransmissions: <span class="success">Reduced by 99.2%</span></li>
          <li>End-to-end Latency: <span class="success">148ms</span> (optimal)</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Performance Restored to Normal</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Issue successfully mitigated. Preparing final report and maintenance recommendations.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>IO_AGENT</strong> for customer communication
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Final Analysis Report</h4>
  
  <div class="rca-container">
    <h4>Root Cause Analysis <span class="confidence-tag">99% Confidence</span></h4>
    <p>The intermittent slow response times experienced by Global Finance Corp were caused by <strong>physical layer degradation</strong> on the DXB-P-01 to MUM-P-01 link. CRC errors and packet loss on this segment were causing significant TCP retransmissions, resulting in application response times of 15-20 seconds.</p>
    
    <p>The issue was immediately mitigated by implementing an SR-TE (Segment Routing Traffic Engineering) policy that steered traffic through an alternative path (LON → FRA → IST → KHI → SIN), completely avoiding the degraded link.</p>
  </div>
  
  <div class="remediation-container">
    <h4>Actions Taken & Recommendations</h4>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">COMPLETED</span> Immediate Mitigation</h5>
      <ol class="action-list">
        <li>✓ Deployed SR-TE policy to redirect traffic via optimal alternate path</li>
        <li>✓ Applied BGP color community for automatic application steering</li>
        <li>✓ Validated performance restoration (response time: 1.2s)</li>
        <li>✓ Configured monitoring alerts for the temporary path</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">SCHEDULED</span> Maintenance Window (48 hours)</h5>
      <ol class="action-list">
        <li>Clean optical connectors on DXB-P-01 and MUM-P-01 interfaces</li>
        <li>Test optical power levels and replace transceivers if needed</li>
        <li>If issue persists, escalate for fiber cable testing/replacement</li>
        <li>Verify link quality before reverting traffic to primary path</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">LONG-TERM</span> Network Resilience</h5>
      <ol class="action-list">
        <li>Implement permanent SR-PCE policies for automatic failover</li>
        <li>Deploy proactive link quality monitoring with ML-based predictions</li>
        <li>Establish diverse physical paths for critical customer traffic</li>
        <li>Create runbook for automated response to link degradation events</li>
      </ol>
    </div>
  </div>
  
  <div class="performance-chart">
    <h4>Performance Metrics - Before vs After SR-TE Deployment</h4>
    <div class="chart-comparison">
      <div class="metric-box">
        <span class="metric-label">Response Time</span>
        <div class="metric-values">
          <span class="before-value">15-20s</span>
          <span class="arrow-right">→</span>
          <span class="after-value">1.2s</span>
        </div>
      </div>
      <div class="metric-box">
        <span class="metric-label">Packet Loss</span>
        <div class="metric-values">
          <span class="before-value">3.2%</span>
          <span class="arrow-right">→</span>
          <span class="after-value">0.001%</span>
        </div>
      </div>
      <div class="metric-box">
        <span class="metric-label">Path Latency</span>
        <div class="metric-values">
          <span class="before-value">165ms</span>
          <span class="arrow-right">→</span>
          <span class="after-value">148ms</span>
        </div>
      </div>
    </div>
  </div>
  
  <style>
    .code-block {
      background-color: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
      overflow-x: auto;
    }
    
    .code-block code {
      color: #f8f8f2;
      background: transparent;
      font-family: 'Courier New', monospace;
      white-space: pre;
    }
    
    .performance-chart {
      margin-top: 20px;
      padding: 15px;
      background-color: #f0f4f8;
      border-radius: 8px;
    }
    
    .chart-comparison {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
    }
    
    .metric-box {
      text-align: center;
      padding: 15px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .metric-label {
      display: block;
      font-weight: bold;
      color: #34495e;
      margin-bottom: 10px;
    }
    
    .metric-values {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .before-value {
      color: #e74c3c;
      font-size: 1.2em;
      font-weight: bold;
    }
    
    .after-value {
      color: #27ae60;
      font-size: 1.2em;
      font-weight: bold;
    }
    
    .arrow-right {
      color: #7f8c8d;
      font-weight: bold;
    }
  </style>
</div>`;

            // Rich text response for Example toxic factor
            const toxicFactorHTML = `<div class="root-container">
  <h3>Agentic AI - Packet Loss Investigation</h3>
  <p><strong>Investigating Intermittent Packet Loss on XYZ Corp Core Network (Ticket #67891)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Ticket #67891 received from XYZ Corp NOC. Reports of 5-8% packet loss occurring every 30-45 minutes across multiple sites connecting to primary data center since 09:15 AM today.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Analyzing packet loss pattern. Intermittent issues with regular intervals often indicate resource constraints or scheduled processes. Need comprehensive topology and loss pattern data.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting network topology from <strong>TOPOLOGY_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🗺️</span>
        <span class="agent-name">TOPOLOGY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Topology mapping complete. XYZ Corp network architecture:</p>
        <ul class="compact-list">
          <li>5 Remote sites connected via MPLS cloud</li>
          <li>Primary data center with redundant WAN routers (DC-RTR-01, DC-RTR-02)</li>
          <li>Core switches (CORE-SW-01, CORE-SW-02) in HSRP configuration</li>
          <li>All affected traffic passes through CORE-SW-01 (active)</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating comprehensive diagnostic approach to locate source of packet loss:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting interface diagnostics from <strong>INTERFACE_CHECK_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting traffic analysis from <strong>TRAFFIC_ANALYSIS_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting resource utilization data from <strong>RESOURCE_MONITOR_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting error counter analysis from <strong>ERROR_DETECTION_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting recent changes from <strong>LCM_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔌</span>
        <span class="agent-name">INTERFACE_CHECK_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Interface health analysis complete. Examined all interfaces in path:</p>
        <ul class="compact-list">
          <li>No physical errors or CRC errors detected</li>
          <li>No interface flaps recorded</li>
          <li>Link utilization within normal parameters</li>
          <li>No duplex mismatches found</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Physical Layer Healthy</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📊</span>
        <span class="agent-name">TRAFFIC_ANALYSIS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Traffic pattern analysis complete:</p>
        <ul class="compact-list">
          <li>Packet loss observed across all protocols and applications</li>
          <li>Loss occurs simultaneously at all remote sites</li>
          <li>Clear 35-40 minute cycle in packet loss pattern</li>
          <li>Loss events last approximately 3-5 minutes each time</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Periodic Loss Pattern Detected</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">📈</span>
        <span class="agent-name">RESOURCE_MONITOR_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Resource utilization analysis complete. <strong>Critical finding</strong>:</p>
        <ul class="metric-list">
          <li>CORE-SW-01 CPU utilization spikes to <span class="problem-value">98%</span> every 40 minutes</li>
          <li>Spike duration: 3-4 minutes</li>
          <li>Process name: <code>SNMP_BULKWALK</code> consuming CPU during spikes</li>
          <li>Packet drops perfectly correlate with CPU utilization spikes</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Root Cause Identified</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🚨</span>
        <span class="agent-name">ERROR_DETECTION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Error counter analysis complete:</p>
        <ul class="compact-list">
          <li>No input/output errors on interfaces</li>
          <li>Buffer allocation failures detected on CORE-SW-01</li>
          <li>Log entries show "Process not running" errors during high CPU events</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Resource Exhaustion Evidence</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📝</span>
        <span class="agent-name">LCM_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Change management analysis complete:</p>
        <ul class="compact-list">
          <li>New monitoring system (SolarWinds) deployed yesterday at 15:30</li>
          <li>SNMP polling interval configured for every 40 minutes</li>
          <li>No other relevant changes in the past 72 hours</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Relevant Change Identified</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Correlating all diagnostic findings to determine root cause:</p>
        <ul class="finding-list">
          <li>Packet loss occurs at regular 40-minute intervals</li>
          <li>CPU utilization on CORE-SW-01 spikes to 98% during loss events</li>
          <li>SNMP_BULKWALK process consuming resources during spikes</li>
          <li>New monitoring system deployed with 40-minute polling interval</li>
        </ul>
        <p>Root cause identified: Aggressive SNMP polling from new monitoring system causing CPU exhaustion on CORE-SW-01, leading to packet drops.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting remediation plan from <strong>RECOMMENDATIONS_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📋</span>
        <span class="agent-name">RECOMMENDATIONS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Detailed remediation plan generated:</p>
        <div class="remediation-phase">
          <h5><span class="phase-tag">IMMEDIATE</span> (Within 15 minutes)</h5>
          <ol class="action-list">
            <li>Reduce SNMP polling frequency to every 120 minutes</li>
            <li>Implement rate limiting on SNMP requests</li>
            <li>Temporarily disable non-critical OIDs from collection</li>
          </ol>
        </div>
        <div class="remediation-phase">
          <h5><span class="phase-tag">SHORT-TERM</span> (Within 24 hours)</h5>
          <ol class="action-list">
            <li>Distribute SNMP load across multiple polling cycles</li>
            <li>Configure polling only for essential MIBs</li>
            <li>Implement SNMP process rate limiting on CORE switches</li>
          </ol>
        </div>
        <div class="remediation-phase">
          <h5><span class="phase-tag">LONG-TERM</span> (Within 1 week)</h5>
          <ol class="action-list">
            <li>Redesign monitoring architecture to use distributed collectors</li>
            <li>Implement SNMPv3 with optimization for resource constraints</li>
            <li>Test and validate monitoring impact before full deployment</li>
          </ol>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Root cause analysis and remediation plan complete. Transferring to IO_AGENT for customer communication.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>IO_AGENT</strong>
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Final Analysis Report</h4>
  
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Investigation Component</th>
          <th>Status</th>
          <th>Findings</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Physical Interfaces</td>
          <td><span class="status-tag status-success">Healthy</span></td>
          <td>No physical errors or interface flaps detected</td>
        </tr>
        <tr>
          <td>Traffic Patterns</td>
          <td><span class="status-tag status-warning">Issue Detected</span></td>
          <td>Periodic packet loss occurring every 40 minutes</td>
        </tr>
        <tr>
          <td>Resource Utilization</td>
          <td><span class="status-tag status-error">Critical Issue</span></td>
          <td>CPU spikes to 98% on CORE-SW-01 during loss events</td>
        </tr>
        <tr>
          <td>Error Counters</td>
          <td><span class="status-tag status-warning">Issue Detected</span></td>
          <td>Buffer allocation failures during high CPU events</td>
        </tr>
        <tr>
          <td>Recent Changes</td>
          <td><span class="status-tag status-warning">Relevant Change</span></td>
          <td>New monitoring system deployed with 40-minute polling</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="rca-container">
    <h4>Root Cause Analysis <span class="confidence-tag">98% Confidence</span></h4>
    <p>The intermittent packet loss occurring on the XYZ Corp network is caused by <strong>aggressive SNMP polling</strong> from the newly deployed SolarWinds monitoring system. Every 40 minutes, the system initiates bulk SNMP walks that cause CPU utilization on CORE-SW-01 to spike to 98% for 3-4 minutes. During these resource exhaustion periods, the switch cannot properly process all packets, resulting in 5-8% packet loss across all connected sites.</p>
    
    <div class="timeline">
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">09:15 AM</span>
          <p>First packet loss event occurs</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">09:55 AM</span>
          <p>Second packet loss event occurs</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">10:35 AM</span>
          <p>Third packet loss event occurs</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">11:15 AM</span>
          <p>Fourth packet loss event occurs</p>
        </div>
      </div>
    </div>
    
    <p>The timing of these events precisely matches the 40-minute SNMP polling interval configured in the monitoring system deployed yesterday. All diagnostic evidence confirms this correlation.</p>
  </div>
  
  <div class="remediation-container">
    <h4>Recommended Actions</h4>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">IMMEDIATE</span> (Within 15 minutes)</h5>
      <ol class="action-list">
        <li>Reduce SNMP polling frequency to every 120 minutes</li>
        <li>Implement rate limiting on SNMP requests using command:<br>
        <code>snmp-server rate-limit 1</code></li>
        <li>Temporarily disable non-critical OIDs from collection</li>
        <li>Verify resolution by monitoring CPU utilization and packet loss</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">SHORT-TERM</span> (Within 24 hours)</h5>
      <ol class="action-list">
        <li>Distribute SNMP load across multiple polling cycles</li>
        <li>Configure polling only for essential MIBs</li>
        <li>Implement SNMP process rate limiting on CORE switches using:<br>
        <code>process cpu threshold type total rising 80 interval 5 falling 20 interval 5</code></li>
        <li>Create CPU monitoring alert for proactive detection</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">LONG-TERM</span> (Within 1 week)</h5>
      <ol class="action-list">
        <li>Redesign monitoring architecture to use distributed collectors</li>
        <li>Implement SNMPv3 with optimization for resource constraints</li>
        <li>Test and validate monitoring impact in lab environment before deployment</li>
        <li>Create monitoring design document with best practices for future implementation</li>
      </ol>
    </div>
  </div>
  
  
  <style>
    .root-container {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    h3, h4 {
      color: #2c3e50;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
      margin-top: 0;
    }
    
    .agent-workflow {
      margin: 20px 0;
    }
    
    .agent-step {
      margin-bottom: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      background-color: #ffffff;
    }
    
    .highlight-step {
      border: 2px solid #e74c3c;
      box-shadow: 0 2px 5px rgba(231, 76, 60, 0.2);
    }
    
    .agent-header {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      background-color: #f5f7fa;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .agent-icon {
      font-size: 1.2em;
      margin-right: 8px;
    }
    
    .agent-name {
      font-weight: bold;
      flex-grow: 1;
      color: #34495e;
    }
    
    .agent-content {
      padding: 15px;
    }
    
    .agent-transfer {
      margin-top: 10px;
      color: #7f8c8d;
      font-size: 0.9em;
      font-style: italic;
    }
    
    .multi-transfer {
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-top: 10px;
    }
    
    .arrow {
      display: inline-block;
      font-weight: bold;
      margin-right: 5px;
      color: #3498db;
    }
    
    .status-tag {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: bold;
      margin-left: 10px;
    }
    
    .status-success {
      background-color: #d4edda;
      color: #155724;
    }
    
    .status-warning {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .status-error {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .status-info {
      background-color: #d1ecf1;
      color: #0c5460;
    }
    
    .compact-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .compact-list li {
      margin-bottom: 5px;
    }
    
    .metric-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .normal-value {
      color: #27ae60;
      font-weight: bold;
    }
    
    .problem-value {
      color: #e74c3c;
      font-weight: bold;
    }
    
    .finding-summary {
      margin-top: 10px;
    }
    
    .finding-tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 4px;
      font-weight: bold;
      font-size: 0.85em;
    }
    
    .finding-good {
      background-color: #d4edda;
      color: #155724;
    }
    
    .finding-issue {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .finding-critical {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .change-details {
      background-color: #fef2f2;
      border-left: 3px solid #e74c3c;
      padding: 10px;
      margin: 10px 0;
    }
    
    .completed {
      position: relative;
    }
    
    .completed::after {
      content: "✓";
      position: absolute;
      top: 10px;
      right: 10px;
      width: 20px;
      height: 20px;
      background-color: #2ecc71;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    
    .table-container {
      margin: 20px 0;
      overflow-x: auto;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .data-table th, .data-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .data-table th {
      background-color: #f2f2f2;
      font-weight: 600;
    }
    
    .data-table tr:hover {
      background-color: #f5f5f5;
    }
    
    .section-header {
      margin-top: 25px;
      color: #2c3e50;
      border-left: 4px solid #3498db;
      padding-left: 10px;
    }
    
    .rca-container {
      background-color: #e8f4fd;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
    }
    
    .rca-container h4 {
      border: none;
      margin-top: 0;
      padding-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .confidence-tag {
      background-color: #3498db;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8em;
    }
    
    .timeline {
      margin: 20px 0;
      position: relative;
    }
    
    .timeline::before {
      content: '';
      position: absolute;
      top: 0;
      left: 15px;
      height: 100%;
      width: 2px;
      background-color: #3498db;
    }
    
    .timeline-item {
      position: relative;
      padding-left: 40px;
      margin-bottom: 15px;
    }
    
    .timeline-dot {
      position: absolute;
      left: 9px;
      top: 5px;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background-color: #3498db;
      border: 2px solid #fff;
    }
    
    .timeline-content {
      padding: 3px 0;
    }
    
    .timeline-time {
      font-weight: bold;
      color: #34495e;
    }
    
    .timeline-content p {
      margin: 2px 0 0 0;
    }
    
    .remediation-container {
      margin-bottom: 20px;
    }
    
    .remediation-phase {
      margin-bottom: 15px;
      padding: 10px;
      border-left: 3px solid #3498db;
      background-color: #f8f9fa;
    }
    
    .phase-tag {
      background-color: #34495e;
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8em;
      font-weight: normal;
    }
    
    .action-list {
      margin-top: 8px;
      padding-left: 25px;
    }
    
    .action-list li {
      margin-bottom: 6px;
    }
    
    code {
      background-color: #f1f1f1;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.9em;
    }
    
    .action-request {
      background-color: #f9f9f9;
      border: 1px solid #e0e0e0;
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
    }
    
    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    .action-button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .approve {
      background-color: #2ecc71;
      color: white;
    }
    
    .schedule {
      background-color: #3498db;
      color: white;
    }
    
    .more-info {
      background-color: #95a5a6;
      color: white;
    }
    
    .approve:hover {
      background-color: #27ae60;
    }
    
    .schedule:hover {
      background-color: #2980b9;
    }
    
    .more-info:hover {
      background-color: #7f8c8d;
    }
    
    .finding-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .finding-list li {
      margin-bottom: 6px;
    }
  </style>
</div>`;

            // Rich text response for Firewall Configuration Analysis and Deployment
            const firewallConfigHTML = `<div class="root-container">
  <h3>Agentic AI - Application Access Troubleshooting</h3>
  <p><strong>Investigating CRM Application Access Issue for TechCorp (Ticket #56789)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Ticket #56789 received from TechCorp. Users in branch office (10.50.0.0/24) unable to access CRM application (192.168.100.50:8443) hosted in datacenter. Connection timeouts reported since 8:00 AM after weekend maintenance.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Analyzing application access issue. Need to trace traffic path and check all firewall policies between branch and datacenter.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting network path analysis from <strong>PATH_TRACE_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🗺️</span>
        <span class="agent-name">PATH_TRACE_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Traffic path identified for Branch → CRM Application:</p>
        <ul class="compact-list">
          <li>Source: Branch Users (10.50.0.0/24)</li>
          <li>→ Branch Firewall (FW-BRANCH-01)</li>
          <li>→ MPLS Network</li>
          <li>→ External Firewall (FW-EXT-01)</li>
          <li>→ DMZ Firewall (FW-DMZ-01)</li>
          <li>→ Internal Firewall (FW-INT-01)</li>
          <li>→ Destination: CRM Server (192.168.100.50:8443)</li>
        </ul>
        <p>Total of <span class="highlight">4 firewall inspection points</span> in the path.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating parallel firewall policy analysis across all security zones:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Checking branch firewall with <strong>BRANCH_FW_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Checking external firewall with <strong>EXTERNAL_FW_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Checking DMZ firewall with <strong>DMZ_FW_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Checking internal firewall with <strong>INTERNAL_FW_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔥</span>
        <span class="agent-name">BRANCH_FW_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Branch firewall (FW-BRANCH-01) analysis:</p>
        <ul class="compact-list">
          <li>Outbound rule exists: 10.50.0.0/24 → ANY on port 8443 <span class="success">✓ ALLOW</span></li>
          <li>NAT configured correctly for branch subnet</li>
          <li>Session logs show traffic leaving branch successfully</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Branch Firewall OK</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">🛡️</span>
        <span class="agent-name">EXTERNAL_FW_AGENT</span>
        <span class="status-tag status-critical">Issue Found</span>
      </div>
      <div class="agent-content">
        <p>External firewall (FW-EXT-01) analysis:</p>
        <ul class="compact-list">
          <li>Checking rules for 10.50.0.0/24 → 192.168.100.50:8443</li>
          <li>Found matching rule #45: 10.0.0.0/8 → 192.168.100.0/24:443 <span class="warning">✓ ALLOW</span></li>
          <li><span class="warning">No rule found for port 8443!</span></li>
          <li>Default action: <span class="problem-value">✗ DENY</span></li>
        </ul>
        <p><strong>Root cause identified:</strong> Weekend maintenance added strict port restrictions. Only standard HTTPS (443) allowed, custom port 8443 is being blocked.</p>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Blocking Rule Identified</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔐</span>
        <span class="agent-name">DMZ_FW_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>DMZ firewall (FW-DMZ-01) analysis:</p>
        <ul class="compact-list">
          <li>Rule exists: Branch_Networks → CRM_Server:8443 <span class="success">✓ ALLOW</span></li>
          <li>Application inspection enabled</li>
          <li>No drops logged for this traffic</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-good">DMZ Firewall OK</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🏢</span>
        <span class="agent-name">INTERNAL_FW_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Internal firewall (FW-INT-01) analysis:</p>
        <ul class="compact-list">
          <li>Rule exists: Trusted_Zones → CRM_Server:8443 <span class="success">✓ ALLOW</span></li>
          <li>IPS signatures up to date</li>
          <li>No security events detected</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Internal Firewall OK</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Root cause confirmed: External firewall blocking port 8443 after weekend maintenance. Requesting rule creation.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting rule implementation from <strong>FIREWALL_CONFIG_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">FIREWALL_CONFIG_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Implementing firewall rule on FW-EXT-01:</p>
        <div class="code-block">
          <code>
configure terminal
access-list CRM_ACCESS extended permit tcp 10.50.0.0 255.255.255.0 host 192.168.100.50 eq 8443
access-group CRM_ACCESS in interface outside

! Adding to existing policy
object-group service CRM_PORTS tcp
 port-object eq 8443
 port-object eq 443

access-list BRANCH_TO_DC line 45 extended permit tcp object-group BRANCH_NETS host 192.168.100.50 object-group CRM_PORTS
          </code>
        </div>
        <p>Rule successfully deployed:</p>
        <ul class="compact-list">
          <li>Rule ID: #45a (inserted after rule #45)</li>
          <li>Source: 10.50.0.0/24</li>
          <li>Destination: 192.168.100.50:8443</li>
          <li>Action: <span class="success">PERMIT</span></li>
          <li>Logging: Enabled</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Configuration complete, requesting validation from <strong>TRAFFIC_TEST_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔍</span>
        <span class="agent-name">TRAFFIC_TEST_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Conducting end-to-end connectivity test:</p>
        <ul class="metric-list">
          <li>Test 1 - TCP Connect: <span class="success">✓ Success (SYN-ACK received)</span></li>
          <li>Test 2 - SSL Handshake: <span class="success">✓ Success (TLS 1.3 established)</span></li>
          <li>Test 3 - Application Response: <span class="success">✓ Success (200 OK)</span></li>
          <li>Response Time: <span class="success">45ms</span> (within SLA)</li>
        </ul>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Test User</th>
                <th>Source IP</th>
                <th>Result</th>
                <th>Response Time</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>user1@branch</td>
                <td>10.50.0.15</td>
                <td><span class="status-tag status-success">Connected</span></td>
                <td>42ms</td>
              </tr>
              <tr>
                <td>user2@branch</td>
                <td>10.50.0.27</td>
                <td><span class="status-tag status-success">Connected</span></td>
                <td>48ms</td>
              </tr>
              <tr>
                <td>admin@branch</td>
                <td>10.50.0.100</td>
                <td><span class="status-tag status-success">Connected</span></td>
                <td>44ms</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Application Access Restored</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📊</span>
        <span class="agent-name">SECURITY_AUDIT_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Post-implementation security audit:</p>
        <ul class="compact-list">
          <li>Rule specificity: <span class="success">✓ Least privilege (only required port/host)</span></li>
          <li>Logging enabled: <span class="success">✓ All connections logged</span></li>
          <li>IPS inspection: <span class="success">✓ Application-aware filtering active</span></li>
          <li>Compliance: <span class="success">✓ Meets security policy requirements</span></li>
        </ul>
        <p>Change documented in CMDB as CHG-2024-0245</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Issue successfully resolved. CRM application access restored for all branch users.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>IO_AGENT</strong> for ticket closure
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Resolution Summary</h4>
  
  <div class="rca-container">
    <h4>Root Cause Analysis <span class="confidence-tag">100% Confidence</span></h4>
    <p>The CRM application access issue was caused by a <strong>missing firewall rule on the external firewall (FW-EXT-01)</strong>. During weekend maintenance, security policies were tightened to allow only standard ports. The CRM application running on custom port 8443 was not included in the approved ports list, causing all connection attempts to be dropped at the external firewall.</p>
  </div>
  
  <div class="firewall-analysis-summary">
    <h4>Firewall Analysis Summary</h4>
    <div class="firewall-grid">
      <div class="firewall-box">
        <h5>🔥 Branch Firewall</h5>
        <span class="status-indicator success">✓ PASS</span>
        <p>Outbound rules correct</p>
      </div>
      <div class="firewall-box issue">
        <h5>🛡️ External Firewall</h5>
        <span class="status-indicator error">✗ BLOCKED</span>
        <p>Port 8443 not allowed</p>
      </div>
      <div class="firewall-box">
        <h5>🔐 DMZ Firewall</h5>
        <span class="status-indicator success">✓ PASS</span>
        <p>Rules configured correctly</p>
      </div>
      <div class="firewall-box">
        <h5>🏢 Internal Firewall</h5>
        <span class="status-indicator success">✓ PASS</span>
        <p>Access permitted</p>
      </div>
    </div>
  </div>
  
  <div class="remediation-container">
    <h4>Actions Taken</h4>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">COMPLETED</span> Immediate Resolution</h5>
      <ol class="action-list">
        <li>✓ Identified blocking point at external firewall</li>
        <li>✓ Created specific rule for CRM application (port 8443)</li>
        <li>✓ Deployed configuration change to FW-EXT-01</li>
        <li>✓ Validated connectivity for all branch users</li>
        <li>✓ Documented change in CMDB</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">RECOMMENDED</span> Follow-up Actions</h5>
      <ol class="action-list">
        <li>Review all custom application ports before maintenance windows</li>
        <li>Create application inventory with non-standard ports</li>
        <li>Implement change notification process for application teams</li>
        <li>Schedule quarterly firewall rule audit</li>
      </ol>
    </div>
  </div>
  
  <div class="metrics-dashboard">
    <h4>Resolution Metrics</h4>
    <div class="metric-grid">
      <div class="metric-card">
        <span class="metric-value">12</span>
        <span class="metric-label">Minutes to Identify</span>
      </div>
      <div class="metric-card">
        <span class="metric-value">3</span>
        <span class="metric-label">Minutes to Fix</span>
      </div>
      <div class="metric-card">
        <span class="metric-value">247</span>
        <span class="metric-label">Users Affected</span>
      </div>
      <div class="metric-card">
        <span class="metric-value">100%</span>
        <span class="metric-label">Access Restored</span>
      </div>
    </div>
  </div>
  
  <style>
    .firewall-analysis-summary {
      margin: 20px 0;
    }
    
    .firewall-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin-top: 15px;
    }
    
    .firewall-box {
      padding: 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      text-align: center;
      background-color: #f9f9f9;
      position: relative;
    }
    
    .firewall-box.issue {
      border-color: #e74c3c;
      background-color: #fee;
    }
    
    .firewall-box h5 {
      margin-top: 0;
      margin-bottom: 10px;
      color: #34495e;
    }
    
    .status-indicator {
      display: block;
      font-size: 1.2em;
      font-weight: bold;
      margin: 10px 0;
    }
    
    .status-indicator.success {
      color: #27ae60;
    }
    
    .status-indicator.error {
      color: #e74c3c;
    }
    
    .metrics-dashboard {
      margin-top: 30px;
    }
    
    .metric-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-top: 15px;
    }
    
    .metric-card {
      text-align: center;
      padding: 20px;
      background-color: #3498db;
      color: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .metric-value {
      display: block;
      font-size: 2.5em;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .metric-label {
      display: block;
      font-size: 0.9em;
      opacity: 0.9;
    }
  </style>
</div>`;

            // Rich text response for Network Latency Analysis
            const networkLatencyHTML = `<h3>Network Latency Analysis Report</h3>
<p><strong>Running network latency analysis across all monitored segments...</strong></p>

<div class="progress-container">
    <div class="progress-bar">
        <div class="progress-fill" style="width: 100%;"></div>
    </div>
</div>

<p>Analysis complete. <span class="status-tag status-critical">Critical Issue Detected</span></p>

<p>Detected <span class="warning">abnormal latency spikes</span> between HQ and East Branch office occurring daily at <span class="highlight">14:00-15:30</span>:</p>

<div class="chart-container">
    <div class="chart-bar" style="height: 30px; left: 10px;"></div>
    <div class="chart-label" style="left: 10px;">9:00</div>
    <div class="chart-bar" style="height: 25px; left: 44px;"></div>
    <div class="chart-label" style="left: 44px;">10:00</div>
    <div class="chart-bar" style="height: 40px; left: 78px;"></div>
    <div class="chart-label" style="left: 78px;">11:00</div>
    <div class="chart-bar" style="height: 45px; left: 112px;"></div>
    <div class="chart-label" style="left: 112px;">12:00</div>
    <div class="chart-bar" style="height: 50px; left: 146px;"></div>
    <div class="chart-label" style="left: 146px;">13:00</div>
    <div class="chart-bar" style="height: 110px; left: 180px; background-color: #d32f2f;"></div>
    <div class="chart-label" style="left: 180px;">14:00</div>
    <div class="chart-bar" style="height: 100px; left: 214px; background-color: #d32f2f;"></div>
    <div class="chart-label" style="left: 214px;">15:00</div>
    <div class="chart-bar" style="height: 40px; left: 248px;"></div>
    <div class="chart-label" style="left: 248px;">16:00</div>
    <div class="chart-bar" style="height: 30px; left: 282px;"></div>
    <div class="chart-label" style="left: 282px;">17:00</div>
</div>

<p>Performance metrics during issue periods:</p>
<ul>
    <li>Average latency increased from <span class="success">45ms</span> to <span class="warning">320ms</span></li>
    <li>Packet loss rate: <span class="highlight">2.7%</span></li>
    <li>Jitter: <span class="highlight">18ms</span></li>
</ul>

<p>Root cause analysis:</p>
<ul>
    <li>Scheduled backup processes consuming <span class="warning">87% of available bandwidth</span></li>
    <li>Backup server (IP: <span class="highlight">10.45.67.89</span>) transferring approximately 120GB daily</li>
    <li>No QoS policies in place to prioritize real-time traffic</li>
</ul>

<p><strong class="success">Recommendation:</strong> Implement the following changes:</p>
<ul>
    <li>Reschedule backup windows to off-peak hours (19:00-07:00)</li>
    <li>Implement QoS policies to prioritize critical traffic</li>
    <li>Increase bandwidth allocation for the East Branch link</li>
</ul>`;

            // Rich text response for Router Troubleshooting
            const routerTroubleshootingHTML = `<h3>Router Troubleshooting Analysis</h3>
<p><strong>Diagnosing router issues based on logs and telemetry data...</strong></p>

<div class="progress-container">
    <div class="progress-bar">
        <div class="progress-fill" style="width: 100%;"></div>
    </div>
</div>

<p>Analysis complete. <span class="status-tag status-critical">Critical Issues Found</span></p>

<p>Identified issues on core router <span class="warning">CR-01</span> coinciding with reported connectivity problems:</p>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>Issue</th>
                <th>Severity</th>
                <th>Impact</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>CPU Spikes</td>
                <td><span class="status-tag status-critical">Critical</span></td>
                <td>Performance degradation</td>
            </tr>
            <tr>
                <td>BGP Sessions Flapping</td>
                <td><span class="status-tag status-critical">Critical</span></td>
                <td>Routing instability</td>
            </tr>
            <tr>
                <td>Memory Utilization</td>
                <td><span class="status-tag status-warning">Warning</span></td>
                <td>Potential system failure</td>
            </tr>
        </tbody>
    </table>
</div>

<p>Detailed findings:</p>
<ul>
    <li>CPU utilization spikes to <span class="warning">94%</span> every 45 minutes</li>
    <li>BGP sessions flapping with peers <span class="highlight">192.168.100.1</span> and <span class="highlight">192.168.100.2</span></li>
    <li>Memory utilization consistently above <span class="warning">85%</span> which may indicate a memory leak</li>
    <li>Process <span class="highlight">IP Input</span> consuming excessive CPU during spikes</li>
    <li>Log analysis shows <span class="warning">3,456 syslog messages</span> related to memory allocation failures in the last 24 hours</li>
</ul>

<p><strong class="success">Recommendation:</strong> Apply firmware update <span class="highlight">15.4(3)M2</span> which addresses known memory management issues. Additionally:</p>
<ul>
    <li>Increase BGP timers to improve stability during recovery</li>
    <li>Implement graceful restart for critical routing protocols</li>
    <li>Schedule maintenance window for router reboot and firmware update</li>
    <li>Monitor memory usage post-update to confirm resolution</li>
</ul>`;

            // Rich text response for Default
            const defaultResponseHTML = `<div class="root-container">
  <h3>Agentic AI - Root Cause Analysis Workflow</h3>
  <p><strong>Investigating Application Performance Issue at ABC Bank Mumbai Branch (Ticket #45782)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Ticket #45782 received from ABC Bank Mumbai branch. Multiple users reporting application response times of 3-5 seconds since 10:45 AM local time.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating systematic investigation approach. Need to map environment and coordinate parallel checks on all components.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting topology from <strong>TOPOLOGY_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🗺️</span>
        <span class="agent-name">TOPOLOGY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Topology mapping complete. Full path from Mumbai to DC-West identified:</p>
        <ul class="compact-list">
          <li>Edge: R1-MUM (10.11.1.1)</li>
          <li>Provider Edge: R2-GW (172.16.0.2)</li>
          <li>Core: R3-CORE (172.16.0.6)</li>
          <li>DC Gateway: DC-GW (10.224.0.1)</li>
          <li>Active tunnel: Tunnel-17 (VPN-456789)</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating parallel investigations to minimize MTTR:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting interface checks from <strong>INTERFACE_CHECK_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting performance analysis from <strong>HISTORICAL_PERF_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting QoS verification from <strong>QOS_POLICY_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting path verification from <strong>TRAFFIC_PATH_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting change records from <strong>LCM_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔌</span>
        <span class="agent-name">INTERFACE_CHECK_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Physical layer analysis complete. All interfaces in path are clean - no errors, no discards, no flaps detected.</p>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Physical Layer Healthy</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📊</span>
        <span class="agent-name">HISTORICAL_PERF_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Performance analysis complete. Detected significant deviation from baseline during incident window:</p>
        <ul class="metric-list">
          <li>Latency: <span class="normal-value">12ms</span> → <span class="problem-value">45ms</span></li>
          <li>Jitter: <span class="normal-value">3ms</span> → <span class="problem-value">18ms</span></li>
          <li>Packet Loss: <span class="normal-value">0.01%</span> → <span class="problem-value">0.8%</span></li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Performance Degradation</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔄</span>
        <span class="agent-name">QOS_POLICY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>QoS policy analysis complete. Detected drop conditions in high-priority queues:</p>
        <ul class="compact-list">
          <li>VOICE class: 12% packet drops</li>
          <li>CRITICAL-DATA class: 8% packet drops</li>
          <li>ABC Bank application traffic is classified in CRITICAL-DATA</li>
          <li>Bandwidth allocation changed from <span class="normal-value">35%</span> to <span class="problem-value">25%</span></li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">QoS Configuration Issue</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🛣️</span>
        <span class="agent-name">TRAFFIC_PATH_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Routing verification complete. Traffic is following expected path through network.</p>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Routing Path Correct</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">📝</span>
        <span class="agent-name">LCM_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Change analysis complete. <strong>Critical finding</strong>: QoS policy change (CR-45211) implemented on R2-GW at 10:40 AM - exactly 5 minutes before reported issues began.</p>
        <div class="change-details">
          <p>Change reduced bandwidth allocation for CRITICAL-DATA class from 35% to 25% as part of network-wide standardization.</p>
        </div>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Root Cause Identified</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>All diagnostic data collected. Analyzing correlation between findings:</p>
        <ul class="compact-list">
          <li>Physical infrastructure is healthy</li>
          <li>Performance metrics show degradation during specific window</li>
          <li>QoS queue drops detected in critical traffic class</li>
          <li>Routing path is correct</li>
          <li>QoS policy change aligns perfectly with issue onset</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting remediation plan from <strong>RECOMMENDATIONS_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📋</span>
        <span class="agent-name">RECOMMENDATIONS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Generated detailed remediation plan with timeline-based approach:</p>
        <div class="remediation-phase">
          <h5><span class="phase-tag">IMMEDIATE</span> (5 minutes)</h5>
          <p>Restore CRITICAL-DATA bandwidth allocation from 25% to previous 35% on R2-GW</p>
        </div>
        <div class="remediation-phase">
          <h5><span class="phase-tag">SHORT-TERM</span> (24-48 hours)</h5>
          <p>Analyze Mumbai branch traffic patterns and right-size QoS allocations</p>
        </div>
        <div class="remediation-phase">
          <h5><span class="phase-tag">LONG-TERM</span> (1-2 weeks)</h5>
          <p>Review QoS standardization project and update change management</p>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Root cause analysis and remediation plan complete. Transferring to IO_AGENT for customer communication.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>IO_AGENT</strong>
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Final Analysis Report</h4>
  
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Investigation Component</th>
          <th>Status</th>
          <th>Findings</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Physical Infrastructure</td>
          <td><span class="status-tag status-success">Healthy</span></td>
          <td>No errors, discards or interface flaps detected</td>
        </tr>
        <tr>
          <td>Network Performance</td>
          <td><span class="status-tag status-warning">Degraded</span></td>
          <td>Latency increased from 12ms to 45ms during incident window</td>
        </tr>
        <tr>
          <td>QoS Configuration</td>
          <td><span class="status-tag status-error">Issue Detected</span></td>
          <td>Critical-Data class drops of 8% observed</td>
        </tr>
        <tr>
          <td>Routing Path</td>
          <td><span class="status-tag status-success">Correct</span></td>
          <td>Traffic following expected network path</td>
        </tr>
        <tr>
          <td>Recent Changes</td>
          <td><span class="status-tag status-error">Relevant Change Found</span></td>
          <td>QoS policy modification at 10:40 AM (CR-45211)</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="rca-container">
    <h4>Root Cause Analysis <span class="confidence-tag">95% Confidence</span></h4>
    <p>The application slowness at ABC Bank Mumbai branch was caused by a QoS policy change implemented at 10:40 AM today on router R2-GW. The change reduced bandwidth allocation for critical application traffic from 35% to 25%, causing queue congestion, packet drops, and increased latency during the 10:45-11:10 AM window.</p>
    <p>All diagnostic agents confirm this finding with physical layer, routing, and other potential causes ruled out. The issue timing precisely aligns with the policy change implementation.</p>
  </div>
  
  <div class="remediation-container">
    <h4>Recommended Actions</h4>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">IMMEDIATE</span> (Resolution within 5 minutes)</h5>
      <ol class="action-list">
        <li>Implement emergency change to restore CRITICAL-DATA bandwidth allocation from 25% to previous 35% on R2-GW</li>
        <li>Command: <code>config t; policy-map WAN-EDGE; class CRITICAL-DATA; bandwidth percent 35; end; write mem</code></li>
        <li>Verify queue drops cease after implementation</li>
        <li>Monitor application performance for 15 minutes to confirm resolution</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">SHORT-TERM</span> (24-48 hours)</h5>
      <ol class="action-list">
        <li>Analyze Mumbai branch traffic patterns over 7-day period</li>
        <li>Right-size QoS allocations based on actual usage patterns</li>
        <li>Create Mumbai-specific policy template</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">LONG-TERM</span> (1-2 weeks)</h5>
      <ol class="action-list">
        <li>Review network-wide QoS standardization project</li>
        <li>Create branch-specific exceptions process</li>
        <li>Update change management procedure to include application testing</li>
      </ol>
    </div>
  </div>
  
  
  <style>
    .root-container {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    h3, h4 {
      color: #2c3e50;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
      margin-top: 0;
    }
    
    .agent-workflow {
      margin: 20px 0;
    }
    
    .agent-step {
      margin-bottom: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      background-color: #ffffff;
    }
    
    .highlight-step {
      border: 2px solid #e74c3c;
      box-shadow: 0 2px 5px rgba(231, 76, 60, 0.2);
    }
    
    .agent-header {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      background-color: #f5f7fa;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .agent-icon {
      font-size: 1.2em;
      margin-right: 8px;
    }
    
    .agent-name {
      font-weight: bold;
      flex-grow: 1;
      color: #34495e;
    }
    
    .agent-content {
      padding: 15px;
    }
    
    .agent-transfer {
      margin-top: 10px;
      color: #7f8c8d;
      font-size: 0.9em;
      font-style: italic;
    }
    
    .multi-transfer {
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-top: 10px;
    }
    
    .arrow {
      display: inline-block;
      font-weight: bold;
      margin-right: 5px;
      color: #3498db;
    }
    
    .status-tag {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: bold;
      margin-left: 10px;
    }
    
    .status-success {
      background-color: #d4edda;
      color: #155724;
    }
    
    .status-warning {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .status-error {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .status-info {
      background-color: #d1ecf1;
      color: #0c5460;
    }
    
    .compact-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .compact-list li {
      margin-bottom: 5px;
    }
    
    .metric-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .normal-value {
      color: #27ae60;
      font-weight: bold;
    }
    
    .problem-value {
      color: #e74c3c;
      font-weight: bold;
    }
    
    .finding-summary {
      margin-top: 10px;
    }
    
    .finding-tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 4px;
      font-weight: bold;
      font-size: 0.85em;
    }
    
    .finding-good {
      background-color: #d4edda;
      color: #155724;
    }
    
    .finding-issue {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .finding-critical {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .change-details {
      background-color: #fef2f2;
      border-left: 3px solid #e74c3c;
      padding: 10px;
      margin: 10px 0;
    }
    
    .completed {
      position: relative;
    }
    
    .completed::after {
      content: "✓";
      position: absolute;
      top: 10px;
      right: 10px;
      width: 20px;
      height: 20px;
      background-color: #2ecc71;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    
    .table-container {
      margin: 20px 0;
      overflow-x: auto;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .data-table th, .data-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .data-table th {
      background-color: #f2f2f2;
      font-weight: 600;
    }
    
    .data-table tr:hover {
      background-color: #f5f5f5;
    }
    
    .section-header {
      margin-top: 25px;
      color: #2c3e50;
      border-left: 4px solid #3498db;
      padding-left: 10px;
    }
    
    .rca-container {
      background-color: #e8f4fd;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
    }
    
    .rca-container h4 {
      border: none;
      margin-top: 0;
      padding-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .confidence-tag {
      background-color: #3498db;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8em;
    }
    
    .remediation-container {
      margin-bottom: 20px;
    }
    
    .remediation-phase {
      margin-bottom: 15px;
      padding: 10px;
      border-left: 3px solid #3498db;
      background-color: #f8f9fa;
    }
    
    .phase-tag {
      background-color: #34495e;
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8em;
      font-weight: normal;
    }
    
    .action-list {
      margin-top: 8px;
      padding-left: 25px;
    }
    
    .action-list li {
      margin-bottom: 6px;
    }
    
    code {
      background-color: #f1f1f1;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.9em;
    }
    
    .action-request {
      background-color: #f9f9f9;
      border: 1px solid #e0e0e0;
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
    }
    
    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    .action-button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .approve {
      background-color: #2ecc71;
      color: white;
    }
    
    .schedule {
      background-color: #3498db;
      color: white;
    }
    
    .more-info {
      background-color: #95a5a6;
      color: white;
    }
    
    .approve:hover {
      background-color: #27ae60;
    }
    
    .schedule:hover {
      background-color: #2980b9;
    }
    
    .more-info:hover {
      background-color: #7f8c8d;
    }
  </style>
</div>`;

            // Dummy responses for different queries with HTML content
            const dummyResponses = {
                'Packet Loss Investigation': [toxicFactorHTML],
                'Firewall Configuration': [firewallConfigHTML],
                'Application Access Issue': [firewallConfigHTML],
                'Network Latency Analysis': [networkLatencyHTML],
                'Router Troubleshooting': [routerTroubleshootingHTML],
                'Intermittent Slow Response': [intermittentSlowResponseHTML],
                'Router Upgrade Assessment': [routerUpgradeResilienceHTML],
                'Security Breach Response': [securityBreachHTML],
                'SD-WAN Optimization': [sdwanOptimizationHTML],
                'Capacity Planning': [capacityPlanningHTML],
                'default': [defaultResponseHTML]
            };
            
            // Function to send a message
            function sendMessage(message) {
    // Switch to chat view
    welcomeScreen.style.display = 'none';
    chatScreen.style.display = 'flex';
    
    // Clear input
    mainInput.value = '';
    chatInput.value = '';
    
    // Add user message
    const userMessageElement = document.createElement('div');
    userMessageElement.className = 'message user-message';
    userMessageElement.textContent = message;
    chatMessages.appendChild(userMessageElement);
    
    // Add typing indicator
    const typingIndicator = document.createElement('div');
    typingIndicator.className = 'typing-indicator';
    typingIndicator.innerHTML = '<span></span><span></span><span></span>';
    chatMessages.appendChild(typingIndicator);
    
    // Auto-scroll to bottom
    chatMessages.scrollTop = chatMessages.scrollHeight;
    
    // Get response
    const responseKey = dummyResponses[message] ? message : 'default';
    const response = dummyResponses[responseKey];
    
    // Create assistant message element
    const assistantMessageElement = document.createElement('div');
    assistantMessageElement.className = 'message assistant-message';
    
    // Helper function for random delays
    function getRandomDelay(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    
    // Start streaming after a longer delay (increased from 800ms to 2000ms)
    setTimeout(() => {
        // Remove typing indicator
        chatMessages.removeChild(typingIndicator);
        
        // Add the message element
        chatMessages.appendChild(assistantMessageElement);
        
        // For HTML content (all responses now use HTML)
        // Reduce chunk size for slower appearance
        const htmlChunks = splitHTMLToChunks(response[0], 5); // Reduced from 10 to 5 chars
        
        let currentHTML = '';
        let chunkIndex = 0;
        
        // Function to process the next chunk with variable timing
        function processNextChunk() {
            if (chunkIndex < htmlChunks.length) {
                currentHTML += htmlChunks[chunkIndex];
                assistantMessageElement.innerHTML = currentHTML;
                chunkIndex++;
                
                // Auto-scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Decide on the delay for the next chunk
                let nextDelay;
                
                // Every 10 chunks, pause for a bit longer to simulate thinking
                if (chunkIndex % 10 === 0) {
                    nextDelay = getRandomDelay(300, 800);
                } 
                // Every 5 chunks, pause briefly
                else if (chunkIndex % 5 === 0) {
                    nextDelay = getRandomDelay(150, 350);
                }
                // Regular typing speed
                else {
                    nextDelay = getRandomDelay(70, 120);
                }
                
                setTimeout(processNextChunk, nextDelay);
            }
        }
        
        // Start the processing
        processNextChunk();
        
    }, 2000); // Increased from 800ms to 2000ms
}
            
            // Function to split HTML into chunks while preserving tags
            function splitHTMLToChunks(html, chunkSize) {
                const result = [];
                let currentChunk = '';
                let inTag = false;
                
               for (let i = 0; i < html.length; i++) {
                    const char = html[i];
                    
                    // Always add the current character to the chunk
                    currentChunk += char;
                    
                    // If we're inside a tag, don't count it toward chunk size
                    if (char === '<') {
                        inTag = true;
                    } else if (char === '>') {
                        inTag = false;
                    }
                    
                    // If we've reached chunk size and we're not inside a tag, add chunk to result
                    if (currentChunk.length >= chunkSize && !inTag) {
                        result.push(currentChunk);
                        currentChunk = '';
                    }
                }
                
                // Add the remaining chunk if there is any
                if (currentChunk) {
                    result.push(currentChunk);
                }
                
                return result;
            }
            
            // Event listeners for sidebar items
            threadItems.forEach(item => {
                item.addEventListener('click', function() {
                    const query = this.getAttribute('data-query');
                    mainInput.value = query;
                    chatInput.value = query;
                    sendMessage(query);
                });
            });
            
            // Event listeners for send buttons
            mainSendBtn.addEventListener('click', function() {
                if (mainInput.value.trim() !== '') {
                    sendMessage(mainInput.value.trim());
                }
            });
            
            chatSendBtn.addEventListener('click', function() {
                if (chatInput.value.trim() !== '') {
                    sendMessage(chatInput.value.trim());
                }
            });
            
            // Event listeners for pressing Enter key
            mainInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && mainInput.value.trim() !== '') {
                    sendMessage(mainInput.value.trim());
                }
            });
            
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && chatInput.value.trim() !== '') {
                    sendMessage(chatInput.value.trim());
                }
            });
            
            // Event listener for new thread button
            document.querySelector('.new-thread-btn').addEventListener('click', function() {
                welcomeScreen.style.display = 'block';
                chatScreen.style.display = 'none';
                chatMessages.innerHTML = '';
            });
        });
    </script>
</body>
</html>